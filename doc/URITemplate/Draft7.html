<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: URITemplate::Draft7
  
    &mdash; Documentation by YARD 0.7.3
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../URITemplate.html" title="URITemplate (module)">URITemplate</a></span></span>
     &raquo; 
    <span class="title">Draft7</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: URITemplate::Draft7
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">URITemplate::Draft7</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
      <dt class="r2">Extended by:</dt>
      <dd class="r2">Forwardable, <span class='object_link'><a href="Draft7/ClassMethods.html" title="URITemplate::Draft7::ClassMethods (module)">ClassMethods</a></span></dd>
      
    
  
    
      <dt class="r1">Includes:</dt>
      <dd class="r1"><span class='object_link'><a href="../URITemplate.html" title="URITemplate (module)">URITemplate</a></span></dd>
      
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/uri_template/draft7.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong> 
    <div class='inline'><p>
Most specs and examples refer to this class directly, because they are
acutally refering to this specific implementation. If you just want uri
templates, you should rather use the methods on <span class='object_link'><a href="../URITemplate.html" title="URITemplate (module)">URITemplate</a></span> to create
templates since they will select an implementation.
</p>
</div>
  </div>

<p>
A uri template which should comply with the uri template spec draft 7 ( <a
href="http://tools.ietf.org/html/draft-gregorio-uritemplate-07">tools.ietf.org/html/draft-gregorio-uritemplate-07</a>
).
</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Draft7/ClassMethods.html" title="URITemplate::Draft7::ClassMethods (module)">ClassMethods</a></span>
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Draft7/Invalid.html" title="URITemplate::Draft7::Invalid (class)">Invalid</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="NO_PROCESSING-constant" class="">NO_PROCESSING =
          <div class="docstring">
  <div class="discussion">
    <p>
Specifies that no processing should be done upon extraction.
</p>


  </div>
</div>
<div class="tags">
  

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#extract-instance_method" title="URITemplate::Draft7#extract (method)">#extract</a></span></li>
    
  </ul>

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="CONVERT_VALUES-constant" class="">CONVERT_VALUES =
          <div class="docstring">
  <div class="discussion">
    <p>
Specifies that the extracted values should be processed.
</p>


  </div>
</div>
<div class="tags">
  

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#extract-instance_method" title="URITemplate::Draft7#extract (method)">#extract</a></span></li>
    
  </ul>

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='symbol'>:convert_values</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="CONVERT_RESULT-constant" class="">CONVERT_RESULT =
          <div class="docstring">
  <div class="discussion">
    <p>
Specifies that the extracted variable list should be processed.
</p>


  </div>
</div>
<div class="tags">
  

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#extract-instance_method" title="URITemplate::Draft7#extract (method)">#extract</a></span></li>
    
  </ul>

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='symbol'>:convert_result</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="DEFAULT_PROCESSING-constant" class="">DEFAULT_PROCESSING =
          <div class="docstring">
  <div class="discussion">
    <p>
Default processing. Means: convert values and the list itself.
</p>


  </div>
</div>
<div class="tags">
  

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#extract-instance_method" title="URITemplate::Draft7#extract (method)">#extract</a></span></li>
    
  </ul>

</div>
        </dt>
        <dd><pre class="code"><span class='const'>CONVERT_VALUES</span> <span class='op'>+</span> <span class='const'>CONVERT_RESULT</span></pre></dd>
      
    </dl>
  


  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Constants included from <span class='object_link'><a href="../URITemplate.html" title="URITemplate (module)">URITemplate</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../URITemplate.html#VERSIONS-constant" title="URITemplate::VERSIONS (constant)">VERSIONS</a></span></p>

  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-instance_method" title="#options (instance method)">- (Object) <strong>options</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute options.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#pattern-instance_method" title="#pattern (instance method)">- (Object) <strong>pattern</strong> </a>
    

    
      (also: #to_s)
    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the pattern for this template.
</p>
</div></span>
  
</li>

    
  </ul>



  
  
  
  
  
  
  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%2F-instance_method" title="#/ (instance method)">- (Object) <strong>/</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Tries to conatenate two templates, as if they were path segments.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3D%3D-instance_method" title="#== (instance method)">- (Object) <strong>==</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Compares two template patterns.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3D%3D%3D-instance_method" title="#=== (instance method)">- (Object) <strong>===</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Alias for to_r.=== .
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#absolute%3F-instance_method" title="#absolute? (instance method)">- (Boolean) <strong>absolute?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
should be relative:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#expand-instance_method" title="#expand (instance method)">- (Object) <strong>expand</strong>(variables = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Expands the template with the given variables.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#extract-instance_method" title="#extract (instance method)">- (Object) <strong>extract</strong>(uri_or_match, post_processing = DEFAULT_PROCESSING) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Extracts variables from a uri ( given as string ) or an instance of
MatchData ( which was matched by the regexp of this template. The actual
result depends on the value of post_processing. This argument specifies
whether pair arrays should be converted to hashes..
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#extract_simple-instance_method" title="#extract_simple (instance method)">- (Object) <strong>extract_simple</strong>(uri_or_match) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Extracts variables without any proccessing.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Draft7) <strong>initialize</strong>(pattern_or_tokens, options = {}) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of Draft7.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#level-instance_method" title="#level (instance method)">- (Object) <strong>level</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the level of this template according to the draft ( <a
href="http://tools.ietf.org/html/draft-gregorio-uritemplate-07#section-1.2">tools.ietf.org/html/draft-gregorio-uritemplate-07#section-1.2</a>
).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#match-instance_method" title="#match (instance method)">- (Object) <strong>match</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Alias for to_r.match .
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#static_characters-instance_method" title="#static_characters (instance method)">- (Object) <strong>static_characters</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the number of static characters in this template.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_r-instance_method" title="#to_r (instance method)">- (Object) <strong>to_r</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Compiles this template into a regular expression which can be used to test
whether a given uri matches this template.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#type-instance_method" title="#type (instance method)">- (Object) <strong>type</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The type of this template.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#variables-instance_method" title="#variables (instance method)">- (Object) <strong>variables</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an array containing all variables.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Draft7/ClassMethods.html" title="URITemplate::Draft7::ClassMethods (module)">ClassMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Draft7/ClassMethods.html#convert-instance_method" title="URITemplate::Draft7::ClassMethods#convert (method)">convert</a></span>, <span class='object_link'><a href="Draft7/ClassMethods.html#try_convert-instance_method" title="URITemplate::Draft7::ClassMethods#try_convert (method)">try_convert</a></span>, <span class='object_link'><a href="Draft7/ClassMethods.html#valid%3F-instance_method" title="URITemplate::Draft7::ClassMethods#valid? (method)">valid?</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../URITemplate.html" title="URITemplate (module)">URITemplate</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../URITemplate.html#apply-class_method" title="URITemplate.apply (method)">apply</a></span>, <span class='object_link'><a href="../URITemplate.html#coerce-class_method" title="URITemplate.coerce (method)">coerce</a></span>, <span class='object_link'><a href="../URITemplate.html#convert-class_method" title="URITemplate.convert (method)">convert</a></span>, <span class='object_link'><a href="../URITemplate.html#new-class_method" title="URITemplate.new (method)">new</a></span>, <span class='object_link'><a href="../URITemplate.html#resolve_class-class_method" title="URITemplate.resolve_class (method)">resolve_class</a></span>, <span class='object_link'><a href="../URITemplate.html#try_convert-class_method" title="URITemplate.try_convert (method)">try_convert</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="URITemplate::Draft7 (class)">Draft7</a></span></tt>) <strong>initialize</strong>(pattern_or_tokens, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of Draft7
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>String,Array</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><p>
either a pattern as String or an Array of tokens
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>Hash</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><p>
some options
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:lazy</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a customizable set of options
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


593
594
595
596
597
598
599
600
601
602
603
604
605
606
607</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 593</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id pattern_or_tokens'>pattern_or_tokens</span><span class='comma'>,</span><span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id dup'>dup</span><span class='period'>.</span><span class='id freeze'>freeze</span>
  <span class='kw'>if</span> <span class='id pattern_or_tokens'>pattern_or_tokens</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>String</span>
    <span class='ivar'>@pattern</span> <span class='op'>=</span> <span class='id pattern_or_tokens'>pattern_or_tokens</span><span class='period'>.</span><span class='id dup'>dup</span>
    <span class='ivar'>@pattern</span><span class='period'>.</span><span class='id freeze'>freeze</span>
    <span class='kw'>unless</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:lazy</span><span class='rbracket'>]</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id tokens'>tokens</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id pattern_or_tokens'>pattern_or_tokens</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>Array</span>
    <span class='ivar'>@tokens</span> <span class='op'>=</span> <span class='id pattern_or_tokens'>pattern_or_tokens</span><span class='period'>.</span><span class='id dup'>dup</span>
    <span class='ivar'>@tokens</span><span class='period'>.</span><span class='id freeze'>freeze</span>
  <span class='kw'>else</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Expected to receive a pattern string, but got </span><span class='embexpr_beg'>#{</span><span class='id pattern_or_tokens'>pattern_or_tokens</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="options-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="options-instance_method">
  
    - (<tt>Object</tt>) <strong>options</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute options
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


588
589
590</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 588</span>

<span class='kw'>def</span> <span class='id options'>options</span>
  <span class='ivar'>@options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="pattern-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="pattern-instance_method">
  
    - (<tt>Object</tt>) <strong>pattern</strong>  <span class="extras">(readonly)</span>
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='to_s-instance_method'>to_s</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the pattern for this template.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


745
746
747</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 745</span>

<span class='kw'>def</span> <span class='id pattern'>pattern</span>
  <span class='ivar'>@pattern</span> <span class='op'>||=</span> <span class='id tokens'>tokens</span><span class='period'>.</span><span class='id map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id join'>join</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="/-instance_method">
  
    - (<tt>Object</tt>) <strong>/</strong>(o) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Tries to conatenate two templates, as if they were path segments. Removes
double slashes or insert one if they are missing.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code"><span class='id tpl'>tpl</span> <span class='op'>=</span> <span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/xy/</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='lparen'>(</span><span class='id tpl'>tpl</span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/z/</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span><span class='period'>.</span><span class='id pattern'>pattern</span> <span class='comment'>#=&gt; '/xy/z/'
</span><span class='lparen'>(</span><span class='id tpl'>tpl</span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>z/</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span><span class='period'>.</span><span class='id pattern'>pattern</span> <span class='comment'>#=&gt; '/xy/z/'
</span><span class='lparen'>(</span><span class='id tpl'>tpl</span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{/z}</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span><span class='period'>.</span><span class='id pattern'>pattern</span> <span class='comment'>#=&gt; '/xy{/z}'
</span><span class='lparen'>(</span><span class='id tpl'>tpl</span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>a</span><span class='tstring_end'>'</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>b</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span><span class='period'>.</span><span class='id pattern'>pattern</span> <span class='comment'>#=&gt; '/xy/a/b'</span></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 816</span>

<span class='kw'>def</span> <span class='op'>/</span><span class='lparen'>(</span><span class='id o'>o</span><span class='rparen'>)</span>
  <span class='id this'>this</span><span class='comma'>,</span> <span class='id other'>other</span><span class='comma'>,</span> <span class='id this_converted'>this_converted</span><span class='comma'>,</span> <span class='id other_converted'>other_converted</span> <span class='op'>=</span> <span class='const'>URITemplate</span><span class='period'>.</span><span class='id coerce'>coerce</span><span class='lparen'>(</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id o'>o</span> <span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id this_converted'>this_converted</span>
    <span class='kw'>return</span> <span class='id this'>this</span> <span class='op'>/</span> <span class='id other'>other</span>
  <span class='kw'>end</span>
  
  <span class='kw'>if</span> <span class='id other'>other</span><span class='period'>.</span><span class='id absolute?'>absolute?</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Expected to receive a relative template but got an absoulte one: </span><span class='embexpr_beg'>#{</span><span class='id other'>other</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>. If you think this is a bug, please report it.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  
  <span class='kw'>if</span> <span class='id other'>other</span><span class='period'>.</span><span class='id pattern'>pattern</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
    <span class='kw'>return</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='comment'># Merge!
</span>  <span class='comment'># Analyze the last token of this an the first token of the next and try to merge them
</span>  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id last'>last</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Literal</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id last'>last</span><span class='period'>.</span><span class='id string'>string</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span> <span class='comment'># the last token ends with an /
</span>      <span class='kw'>if</span> <span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id first'>first</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>Literal</span>
        <span class='comment'># both seems to be paths, merge them!
</span>        <span class='kw'>if</span> <span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id first'>first</span><span class='period'>.</span><span class='id string'>string</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span>
          <span class='comment'># strip one '/'
</span>          <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span> <span class='kw'>self</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='lbracket'>[</span> <span class='const'>Literal</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id last'>last</span><span class='period'>.</span><span class='id string'>string</span> <span class='op'>+</span> <span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id first'>first</span><span class='period'>.</span><span class='id string'>string</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rbracket'>]</span> <span class='op'>+</span> <span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='comment'># no problem, but we can merge them
</span>          <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span> <span class='kw'>self</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='lbracket'>[</span> <span class='const'>Literal</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id last'>last</span><span class='period'>.</span><span class='id string'>string</span> <span class='op'>+</span> <span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id first'>first</span><span class='period'>.</span><span class='id string'>string</span><span class='rparen'>)</span> <span class='rbracket'>]</span> <span class='op'>+</span> <span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>elsif</span> <span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id first'>first</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>Expression</span><span class='op'>::</span><span class='const'>Path</span>
        <span class='comment'># this will automatically insert '/'
</span>        <span class='comment'># so we can strip one '/'
</span>        <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span> <span class='kw'>self</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='lbracket'>[</span> <span class='const'>Literal</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id last'>last</span><span class='period'>.</span><span class='id string'>string</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rbracket'>]</span> <span class='op'>+</span> <span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span> <span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id first'>first</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Expression</span><span class='op'>::</span><span class='const'>Path</span><span class='rparen'>)</span> <span class='kw'>or</span> <span class='lparen'>(</span><span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id first'>first</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Literal</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span><span class='period'>.</span><span class='id first'>first</span><span class='period'>.</span><span class='id string'>string</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span> <span class='kw'>self</span><span class='period'>.</span><span class='id tokens'>tokens</span> <span class='op'>+</span> <span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span> <span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span> <span class='kw'>self</span><span class='period'>.</span><span class='id tokens'>tokens</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='const'>Literal</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id other'>other</span><span class='period'>.</span><span class='id tokens'>tokens</span> <span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="==-instance_method">
  
    - (<tt>Object</tt>) <strong>==</strong>(o) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Compares two template patterns.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


752
753
754
755
756
757
758</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 752</span>

<span class='kw'>def</span> <span class='op'>==</span><span class='lparen'>(</span><span class='id o'>o</span><span class='rparen'>)</span>
  <span class='id this'>this</span><span class='comma'>,</span> <span class='id other'>other</span><span class='comma'>,</span> <span class='id this_converted'>this_converted</span><span class='comma'>,</span> <span class='id other_converted'>other_converted</span> <span class='op'>=</span> <span class='const'>URITemplate</span><span class='period'>.</span><span class='id coerce'>coerce</span><span class='lparen'>(</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id o'>o</span> <span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id this_converted'>this_converted</span>
    <span class='kw'>return</span> <span class='id this'>this</span> <span class='op'>==</span> <span class='id other'>other</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id this'>this</span><span class='period'>.</span><span class='id pattern'>pattern</span> <span class='op'>==</span> <span class='id other'>other</span><span class='period'>.</span><span class='id pattern'>pattern</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="===-instance_method">
  
    - (<tt>Object</tt>) <strong>===</strong>(uri) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Alias for to_r.=== . Tests whether this template matches a given uri.
</p>


  </div>
</div>
<div class="tags">
  
  

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
TrueClass, FalseClass
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


763</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 763</span>

<span class='id def_delegators'>def_delegators</span> <span class='symbol'>:to_r</span><span class='comma'>,</span> <span class='symbol'>:===</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="absolute?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>absolute?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
should be relative:
</p>
<pre class="code">
 xxx ...
 {xxx}x ...

 should not be relative:
 {proto}:// ...
 http:// ...
 http{ssl}:// ...</pre>


  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884
885
886
887
888</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 867</span>

<span class='kw'>def</span> <span class='id absolute?'>absolute?</span>
  <span class='id read_chars'>read_chars</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  
  <span class='id tokens'>tokens</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id token'>token</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id token'>token</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>Expression</span>
      <span class='kw'>if</span> <span class='id token'>token</span><span class='period'>.</span><span class='id class'>class</span><span class='op'>::</span><span class='const'>OPERATOR</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
        <span class='id read_chars'>read_chars</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>else</span>
        <span class='kw'>return</span> <span class='kw'>false</span>
      <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='id token'>token</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>Literal</span>
      <span class='id read_chars'>read_chars</span> <span class='op'>&lt;&lt;</span> <span class='id token'>token</span><span class='period'>.</span><span class='id string'>string</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id read_chars'>read_chars</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[a-z]+:\/\/</span><span class='regexp_end'>/i</span></span>
      <span class='kw'>return</span> <span class='kw'>true</span>
    <span class='kw'>elsif</span> <span class='id read_chars'>read_chars</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;!:|\/)\/(?!\/)</span><span class='regexp_end'>/</span></span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="expand-instance_method">
  
    - (<tt>Object</tt>) <strong>expand</strong>(variables = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong> 
    <div class='inline'><p>
All keys of the supplied hash should be strings as anything else
won&#8217;t be recognised.
</p>
</div>
  </div>

  <div class="note notetag">
    <strong>Note:</strong> 
    <div class='inline'><p>
There are neither default values for variables nor will anything be raised
if a variable is missing. Please read the spec if you want to know how
undefined variables are handled.
</p>
</div>
  </div>

<p>
Expands the template with the given variables. The expansion should be
compatible to uritemplate spec draft 7 ( <a
href="http://tools.ietf.org/html/draft-gregorio-uritemplate-07">tools.ietf.org/html/draft-gregorio-uritemplate-07</a>
).
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code"><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{foo}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id expand'>expand</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>foo</span><span class='tstring_end'>'</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bar</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; 'bar'
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{?args*}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id expand'>expand</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>args</span><span class='tstring_end'>'</span></span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>key</span><span class='tstring_end'>'</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>value</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='comment'>#=&gt; '?key=value'
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{undef}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id expand'>expand</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='comment'>#=&gt; ''</span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>variables</span>
      
      
        <span class='type'></span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
Hash
</p>
</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
String
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


622
623
624
625
626</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 622</span>

<span class='kw'>def</span> <span class='id expand'>expand</span><span class='lparen'>(</span><span class='id variables'>variables</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id tokens'>tokens</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id part'>part</span><span class='op'>|</span>
    <span class='id part'>part</span><span class='period'>.</span><span class='id expand'>expand</span><span class='lparen'>(</span><span class='id variables'>variables</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id join'>join</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="extract-instance_method">
  
    - (<tt>Object</tt>) <strong>extract</strong>(uri_or_match, post_processing = DEFAULT_PROCESSING) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong> 
    <div class='inline'><p>
Don&#8217;t expect that an extraction can fully recover the expanded
variables. Extract rather generates a variable list which should expand to
the uri from which it were extracted. In general the following equation
should hold true:
</p>
<pre class="code">
  <span class='id a_tpl'>a_tpl</span><span class='period'>.</span><span class='id expand'>expand</span><span class='lparen'>(</span> <span class='id a_tpl'>a_tpl</span><span class='period'>.</span><span class='id extract'>extract</span><span class='lparen'>(</span> <span class='id an_uri'>an_uri</span> <span class='rparen'>)</span> <span class='rparen'>)</span> <span class='op'>==</span> <span class='id an_uri'>an_uri</span></pre>
</div>
  </div>

  <div class="note notetag">
    <strong>Note:</strong> 
    <div class='inline'><p>
The current implementation drops duplicated variables instead of checking
them.
</p>
</div>
  </div>

<p>
Extracts variables from a uri ( given as string ) or an instance of
MatchData ( which was matched by the regexp of this template. The actual
result depends on the value of post_processing. This argument specifies
whether pair arrays should be converted to hashes.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'><p>
Default Processing
</p>
</div></h4>
      <pre class="example code"><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{var}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id extract'>extract</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>value</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; {'var'=&gt;'value'}
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{&amp;args*}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id extract'>extract</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;a=1&amp;b=2</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; {'args'=&gt;{'a'=&gt;'1','b'=&gt;'2'}}
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{&amp;arg,arg}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id extract'>extract</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;arg=1&amp;arg=2</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; {'arg'=&gt;'2'}</span></pre>
    
      <h4><div class='inline'><p>
No Processing
</p>
</div></h4>
      <pre class="example code"><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{var}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id extract'>extract</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>value</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='op'>::</span><span class='const'>NO_PROCESSING</span><span class='rparen'>)</span> <span class='comment'>#=&gt; [['var','value']]
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{&amp;args*}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id extract'>extract</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;a=1&amp;b=2</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='op'>::</span><span class='const'>NO_PROCESSING</span><span class='rparen'>)</span> <span class='comment'>#=&gt; [['args',[['a','1'],['b','2']]]]
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{&amp;arg,arg}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id extract'>extract</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;arg=1&amp;arg=2</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='op'>::</span><span class='const'>NO_PROCESSING</span><span class='rparen'>)</span> <span class='comment'>#=&gt; [['arg','1'],['arg','2']]</span></pre>
    
      <h4><div class='inline'><p>
Extraction cruces
</p>
</div></h4>
      <pre class="example code"><span class='id two_lists'>two_lists</span> <span class='op'>=</span> <span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{listA*,listB*}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id uri'>uri</span> <span class='op'>=</span> <span class='id two_lists'>two_lists</span><span class='period'>.</span><span class='id expand'>expand</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>listA</span><span class='tstring_end'>'</span></span><span class='op'>=&gt;</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>listB</span><span class='tstring_end'>'</span></span><span class='op'>=&gt;</span><span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>4</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='comment'>#=&gt; &quot;1,2,3,4&quot;
</span><span class='id variables'>variables</span> <span class='op'>=</span> <span class='id two_lists'>two_lists</span><span class='period'>.</span><span class='id extract'>extract</span><span class='lparen'>(</span> <span class='id uri'>uri</span> <span class='rparen'>)</span> <span class='comment'>#=&gt; {'listA'=&gt;[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;],'listB'=&gt;nil}
</span><span class='comment'># However, like said in the note:
</span><span class='id two_lists'>two_lists</span><span class='period'>.</span><span class='id expand'>expand</span><span class='lparen'>(</span> <span class='id variables'>variables</span> <span class='rparen'>)</span> <span class='op'>==</span> <span class='id uri'>uri</span> <span class='comment'>#=&gt; true</span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>Uri_or_MatchData</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>MatchData</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
A uri or a matchdata from which the variables should be extracted.
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>Processing</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Specifies which processing should be done.
</p>
</div>
      
    </li>
  
</ul>

<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
Encoding::InvalidByteSequenceError when the given uri was not properly
encoded.
</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
Encoding::UndefinedConversionError when the given uri could not be
converted to utf-8.
</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
Encoding::CompatibilityError when the given uri could not be converted to
utf-8.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 704</span>

<span class='kw'>def</span> <span class='id extract'>extract</span><span class='lparen'>(</span><span class='id uri_or_match'>uri_or_match</span><span class='comma'>,</span> <span class='id post_processing'>post_processing</span> <span class='op'>=</span> <span class='const'>DEFAULT_PROCESSING</span> <span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id uri_or_match'>uri_or_match</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>String</span>
    <span class='id m'>m</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id to_r'>to_r</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id uri_or_match'>uri_or_match</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id uri_or_match'>uri_or_match</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>MatchData</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id uri_or_match'>uri_or_match</span><span class='period'>.</span><span class='id regexp'>regexp</span> <span class='op'>!=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id to_r'>to_r</span>
      <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Trying to extract variables from MatchData which was not generated by this template.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id m'>m</span> <span class='op'>=</span> <span class='id uri_or_match'>uri_or_match</span>
  <span class='kw'>elsif</span> <span class='id uri_or_match'>uri_or_match</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='kw'>return</span> <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Expected to receive a String or a MatchData, but got </span><span class='embexpr_beg'>#{</span><span class='id uri_or_match'>uri_or_match</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id m'>m</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='kw'>return</span> <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id result'>result</span> <span class='op'>=</span> <span class='id extract_matchdata'>extract_matchdata</span><span class='lparen'>(</span><span class='id m'>m</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id post_processing'>post_processing</span><span class='period'>.</span><span class='id include?'>include?</span> <span class='symbol'>:convert_values</span>
      <span class='id result'>result</span><span class='period'>.</span><span class='id map!'>map!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id k'>k</span><span class='comma'>,</span><span class='id v'>v</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id k'>k</span><span class='comma'>,</span> <span class='const'>Utils</span><span class='period'>.</span><span class='id pair_array_to_hash'>pair_array_to_hash</span><span class='lparen'>(</span><span class='id v'>v</span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    
    <span class='kw'>if</span> <span class='id post_processing'>post_processing</span><span class='period'>.</span><span class='id include?'>include?</span> <span class='symbol'>:convert_result</span>
      <span class='id result'>result</span> <span class='op'>=</span> <span class='const'>Utils</span><span class='period'>.</span><span class='id pair_array_to_hash'>pair_array_to_hash</span><span class='lparen'>(</span><span class='id result'>result</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    
    <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
      <span class='kw'>return</span> <span class='kw'>yield</span> <span class='id result'>result</span>
    <span class='kw'>end</span>
    
    <span class='kw'>return</span> <span class='id result'>result</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="extract_simple-instance_method">
  
    - (<tt>Object</tt>) <strong>extract_simple</strong>(uri_or_match) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Extracts variables without any proccessing. This is equivalent to
<span class='object_link'><a href="#extract-instance_method" title="URITemplate::Draft7#extract (method)">#extract</a></span> with options <span class='object_link'><a href="#NO_PROCESSING-constant" title="URITemplate::Draft7::NO_PROCESSING (constant)">NO_PROCESSING</a></span>.
</p>


  </div>
</div>
<div class="tags">
  

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#extract-instance_method" title="URITemplate::Draft7#extract (method)">#extract</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


740
741
742</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 740</span>

<span class='kw'>def</span> <span class='id extract_simple'>extract_simple</span><span class='lparen'>(</span><span class='id uri_or_match'>uri_or_match</span><span class='rparen'>)</span>
  <span class='id extract'>extract</span><span class='lparen'>(</span> <span class='id uri_or_match'>uri_or_match</span><span class='comma'>,</span> <span class='const'>NO_PROCESSING</span> <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="level-instance_method">
  
    - (<tt>Object</tt>) <strong>level</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the level of this template according to the draft ( <a
href="http://tools.ietf.org/html/draft-gregorio-uritemplate-07#section-1.2">tools.ietf.org/html/draft-gregorio-uritemplate-07#section-1.2</a>
). Higher level means higher complexity. Basically this is defined as:
</p>
<ul>
<li><p>
Level 1: no operators, one variable per expansion, no variable modifiers
</p>
</li>
<li><p>
Level 2: &#8217;+&#8217; and &#8217;#&#8217; operators, one variable per
expansion, no variable modifiers
</p>
</li>
<li><p>
Level 3: all operators, multiple variables per expansion, no variable
modifiers
</p>
</li>
<li><p>
Level 4: all operators, multiple variables per expansion, all variable
modifiers
</p>
</li>
</ul>
<p>
Templates of lower levels might be convertible to other formats while
templates of higher levels might be incompatible. Level 1 for example
should be convertible to any other format since it just contains simple
expansions.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code"><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/foo/</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id level'>level</span> <span class='comment'>#=&gt; 1
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/foo{bar}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id level'>level</span> <span class='comment'>#=&gt; 1
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/foo{#bar}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id level'>level</span> <span class='comment'>#=&gt; 2
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/foo{.bar}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id level'>level</span> <span class='comment'>#=&gt; 3
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/foo{bar,baz}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id level'>level</span> <span class='comment'>#=&gt; 3
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/foo{bar:20}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id level'>level</span> <span class='comment'>#=&gt; 4
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/foo{bar*}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id level'>level</span> <span class='comment'>#=&gt; 4</span></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


802
803
804</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 802</span>

<span class='kw'>def</span> <span class='id level'>level</span>
  <span class='id tokens'>tokens</span><span class='period'>.</span><span class='id map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:level</span><span class='rparen'>)</span><span class='period'>.</span><span class='id max'>max</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="match-instance_method">
  
    - (<tt>Object</tt>) <strong>match</strong>(uri) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Alias for to_r.match . Matches this template against the given uri.
</p>


  </div>
</div>
<div class="tags">
  
  

<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
MatchData
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
MatchData, Object
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


769</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 769</span>

<span class='id def_delegators'>def_delegators</span> <span class='symbol'>:to_r</span><span class='comma'>,</span> <span class='symbol'>:match</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="static_characters-instance_method">
  
    - (<tt>Object</tt>) <strong>static_characters</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the number of static characters in this template. This method is
useful for routing, since it&#8217;s often pointful to use the url with
fewer variable characters. For example &#8216;static&#8217; and
&#8216;stavar&#8217; both match &#8216;static&#8217;, but in most cases
&#8216;static&#8217; should be prefered over &#8216;stavar&#8217; since
it&#8217;s more specific.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code"><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/xy/</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id static_characters'>static_characters</span> <span class='comment'>#=&gt; 4
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{foo}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id static_characters'>static_characters</span> <span class='comment'>#=&gt; 0
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>a{foo}b</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id static_characters'>static_characters</span> <span class='comment'>#=&gt; 2</span></pre>
    
  </div>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
Numeric
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


900
901
902</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 900</span>

<span class='kw'>def</span> <span class='id static_characters'>static_characters</span>
  <span class='ivar'>@static_characters</span> <span class='op'>||=</span> <span class='id tokens'>tokens</span><span class='period'>.</span><span class='id select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id t'>t</span><span class='op'>|</span> <span class='id t'>t</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Literal</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id t'>t</span><span class='op'>|</span> <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span><span class='period'>.</span><span class='id size'>size</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id inject'>inject</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span><span class='symbol'>:+</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_r-instance_method">
  
    - (<tt>Object</tt>) <strong>to_r</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Compiles this template into a regular expression which can be used to test
whether a given uri matches this template. This template is also used for
<span class='object_link'><a href="#%3D%3D%3D-instance_method" title="URITemplate::Draft7#=== (method)">#===</a></span>.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code"><span class='id tpl'>tpl</span> <span class='op'>=</span> <span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/foo/{bar}/</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id regex'>regex</span> <span class='op'>=</span> <span class='id tpl'>tpl</span><span class='period'>.</span><span class='id to_r'>to_r</span>
<span class='id regex'>regex</span> <span class='op'>===</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/foo/baz/</span><span class='tstring_end'>'</span></span> <span class='comment'>#=&gt; true
</span><span class='id regex'>regex</span> <span class='op'>===</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/foz/baz/</span><span class='tstring_end'>'</span></span> <span class='comment'>#=&gt; false</span></pre>
    
  </div>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
Regexp
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


657
658
659
660
661
662
663
664
665</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 657</span>

<span class='kw'>def</span> <span class='id to_r'>to_r</span>
  <span class='id classes'>classes</span> <span class='op'>=</span> <span class='const'>CHARACTER_CLASSES</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id _'>_</span><span class='comma'>,</span><span class='id v'>v</span><span class='op'>|</span> <span class='id v'>v</span><span class='lbracket'>[</span><span class='symbol'>:class</span><span class='rbracket'>]</span><span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>{0}\n</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='id bc'>bc</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@regexp</span> <span class='op'>||=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id classes'>classes</span><span class='period'>.</span><span class='id join'>join</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\A</span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='id tokens'>tokens</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id part'>part</span><span class='op'>|</span>
    <span class='id r'>r</span> <span class='op'>=</span> <span class='id part'>part</span><span class='period'>.</span><span class='id to_r_source'>to_r_source</span><span class='lparen'>(</span><span class='id bc'>bc</span><span class='rparen'>)</span>
    <span class='id bc'>bc</span> <span class='op'>+=</span> <span class='id part'>part</span><span class='period'>.</span><span class='id size'>size</span>
    <span class='id r'>r</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id join'>join</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\z</span><span class='tstring_end'>'</span></span> <span class='comma'>,</span> <span class='const'>Regexp</span><span class='op'>::</span><span class='const'>EXTENDED</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="type-instance_method">
  
    - (<tt>Object</tt>) <strong>type</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The type of this template.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code"><span class='id tpl1'>tpl1</span> <span class='op'>=</span> <span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/foo</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id tpl2'>tpl2</span> <span class='op'>=</span> <span class='const'>URITemplate</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span> <span class='id tpl1'>tpl1</span><span class='period'>.</span><span class='id pattern'>pattern</span><span class='comma'>,</span> <span class='id tpl1'>tpl1</span><span class='period'>.</span><span class='id type'>type</span> <span class='rparen'>)</span>
<span class='id tpl1'>tpl1</span> <span class='op'>==</span> <span class='id tpl2'>tpl2</span> <span class='comment'>#=&gt; true</span></pre>
    
  </div>


  <h3>See Also:</h3>
  <ul class="see">
    
      <li>URITemplate::Draft7.{URITemplate{URITemplate#type}</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


779
780
781</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 779</span>

<span class='kw'>def</span> <span class='id type'>type</span>
  <span class='symbol'>:draft7</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="variables-instance_method">
  
    - (<tt>Object</tt>) <strong>variables</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an array containing all variables. Repeated variables are ignored,
but the order will be kept intact.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code"><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{foo}{bar}{baz}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id variables'>variables</span> <span class='comment'>#=&gt; ['foo','bar','baz']
</span><span class='const'>URITemplate</span><span class='op'>::</span><span class='const'>Draft7</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{a}{c}{a}{b}</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id variables'>variables</span> <span class='comment'>#=&gt; ['c','a','b']</span></pre>
    
  </div>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
Array
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


634
635
636
637
638
639
640
641
642
643
644
645
646</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/uri_template/draft7.rb', line 634</span>

<span class='kw'>def</span> <span class='id variables'>variables</span>
  <span class='ivar'>@variables</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='id vars'>vars</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id tokens'>tokens</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id token'>token</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id token'>token</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span> <span class='symbol'>:variable_names</span>
        <span class='id vn'>vn</span> <span class='op'>=</span> <span class='id token'>token</span><span class='period'>.</span><span class='id variable_names'>variable_names</span><span class='period'>.</span><span class='id uniq'>uniq</span>
        <span class='id vars'>vars</span> <span class='op'>-=</span> <span class='id vn'>vn</span>
        <span class='id vars'>vars</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='op'>*</span><span class='id vn'>vn</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='rbrace'>}</span>
    <span class='id vars'>vars</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Fri Nov  4 15:41:30 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.3 (ruby-1.9.2).
</div>

  </body>
</html>