<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Uri template7</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.5.3/jquery-1.6.2.min.js' type='text/javascript'></script>
    <script src='./assets/0.5.3/jquery.dataTables.min.js' type='text/javascript'></script>   
    <script src='./assets/0.5.3/fancybox/jquery.fancybox-1.3.1.pack.js' type='text/javascript'></script>   
    <script src='./assets/0.5.3/jquery.timeago.js' type='text/javascript'></script>   
    <script src='./assets/0.5.3/jquery.url.js' type='text/javascript'></script>   
    <script src='./assets/0.5.3/highlight.pack.js' type='text/javascript'></script>  
    <script src='./assets/0.5.3/app.js' type='text/javascript'></script>    
    <link href='./assets/0.5.3/stylesheet.css' media='screen, projection, print' rel='stylesheet' type='text/css'>
    <link href='./assets/0.5.3/highlight.css' media='screen, projection, print' rel='stylesheet' type='text/css'>
    <link href='./assets/0.5.3/fancybox/jquery.fancybox-1.3.1.css' media='screen, projection, print' rel='stylesheet' type='text/css'>
    <link href='./assets/0.5.3/smoothness/jquery-ui-1.8.4.custom.css' media='screen, projection, print' rel='stylesheet' type='text/css'>    
    <link rel="shortcut icon" type="image/png" href="./assets/0.5.3/favicon_green.png" />
    <link rel="icon" type="image/png" href="./assets/0.5.3/favicon.png" />
  </head>
  
  <body>
    <div id="loading">
      <img src="./assets/0.5.3/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" style="display:none;">
      <div class="timestamp">Generated <abbr class="timeago" title="2011-11-02T16:38:38+01:00">2011-11-02T16:38:38+01:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent"><span class="green">98.53%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         58.1
       </span>
    </span> hits/line)
  </h2>
  <a name="AllFiles"></a>
  <div>
    <b>5</b> files in total.
    <b>544</b> relevant lines. 
    <span class="green"><b>536</b> lines covered</span> and
    <span class="red"><b>8</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#d4275a0f3994093bbcd2c3b31275f5d09a924c13" class="src_link" title="lib/uri_template.rb">lib/uri_template.rb</a></td>
        <td class="yellow strong">88.24 %</td>
        <td>85</td>
        <td>17</td>
        <td>15</td>
        <td>2</td>
        <td>4.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#b51222c87eeada8f9c7a5548d3fd2877b85a0b26" class="src_link" title="lib/uri_template/draft7.rb">lib/uri_template/draft7.rb</a></td>
        <td class="green strong">98.39 %</td>
        <td>925</td>
        <td>373</td>
        <td>367</td>
        <td>6</td>
        <td>80.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f8d256d1ef3e0fd588dc69c54499afd0f2cfe206" class="src_link" title="lib/uri_template/utils.rb">lib/uri_template/utils.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>125</td>
        <td>30</td>
        <td>30</td>
        <td>0</td>
        <td>179.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#910d6a583e8f439b42852c767f0a87e01f6f0e2a" class="src_link" title="spec/draft7_spec.rb">spec/draft7_spec.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>506</td>
        <td>95</td>
        <td>95</td>
        <td>0</td>
        <td>15.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#5df27f43cdf5ed62c4a0aa01f7e40b401889b6c4" class="src_link" title="spec/uri_template_spec.rb">spec/uri_template_spec.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>92</td>
        <td>29</td>
        <td>29</td>
        <td>0</td>
        <td>10.9</td>
      </tr>
      
    </tbody>
  </table>
</div>


        
      </div>
    
      <div id="footer">
        Generated by <a href="http://github.com/colszowka/simplecov">simplecov</a> v0.5.4 
        and simplecov-html v0.5.3<br/>
        using RSpec
      </div>
    
      <div class="source_files">
      
        <div class="source_table" id="d4275a0f3994093bbcd2c3b31275f5d09a924c13">
  <div class="header">
    <h3>lib/uri_template.rb</h3>
    <h4><span class="yellow">88.24 %</span> covered</h4>
    <div>
      <b>17</b> relevant lines. 
      <span class="green"><b>15</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">#    This program is free software: you can redistribute it and/or modify</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">#    it under the terms of the Affero GNU General Public License as published by</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">#    the Free Software Foundation, either version 3 of the License, or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">#    (at your option) any later version.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">#    This program is distributed in the hope that it will be useful,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">#    GNU General Public License for more details.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">#    You should have received a copy of the GNU General Public License</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">#    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">#    (c) 2011 by Hannes Georg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"># A base module for all implementations of a uri template.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">module URITemplate</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">  autoload :Utils, 'uri_template/utils'</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">  autoload :Draft7, 'uri_template/draft7'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">  # A hash with all available implementations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">  # Currently the only implementation is :draft7. But there also aliases :default and :latest available. This should make it possible to add newer specs later.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">  # @see resolve_class</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">  VERSIONS = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    :draft7 =&gt; :Draft7,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">    :default =&gt; :Draft7,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">    :latest =&gt; :Draft7</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">  # Looks up which implementation to use.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">  # Extracts all symbols from args and looks up the first in {VERSIONS}.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">  # @return Array an array of the class to use and the unused parameters.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">  # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">  #   URITemplate.resolve_class() #=&gt; [ URITemplate::Draft7, [] ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">  #   URITemplate.resolve_class(:draft7) #=&gt; [ URITemplate::Draft7, [] ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">  #   URITemplate.resolve_class(&quot;template&quot;,:draft7) #=&gt; [ URITemplate::Draft7, [&quot;template&quot;] ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">  # </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">  # @raise ArgumentError when no class was found.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.resolve_class(*args)</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="45">
          <span class="hits">25</span>
          
          <code class="ruby">    symbols, rest = args.partition{|x| x.kind_of? Symbol }</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="46">
          <span class="hits">10</span>
          
          <code class="ruby">    version = symbols.fetch(0, :default)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="47">
          <span class="hits">10</span>
          
          <code class="ruby">    raise ArgumentError, &quot;Unknown template version #{version.inspect}, defined versions: #{VERSIONS.keys.inspect}&quot; unless VERSIONS.key?(version)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="48">
          <span class="hits">9</span>
          
          <code class="ruby">    return self.const_get(VERSIONS[version]), rest</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">  # Creates an uri template using an implementation.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">  # The args should at least contain a pattern string.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">  # Symbols in the args are used to determine the actual implementation.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">  # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">  #   tpl = URITemplate.new('{x}') # a new template using the default implementation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">  #   tpl.expand('x'=&gt;'y') #=&gt; 'y'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">  # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">  #   tpl = URITemplate.new(:draft7,'{x}') # a new template using the draft7 implementation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">  # </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="62">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.new(*args)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="63">
          <span class="hits">7</span>
          
          <code class="ruby">    klass, rest = resolve_class(*args)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="64">
          <span class="hits">6</span>
          
          <code class="ruby">    return klass.new(*rest)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">  # A base class for all errors which will be raised upon invalid syntax.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">  module Invalid</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">  # @abstract</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">  # Expands this uri template with the given variables.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">  # The variables should be converted to strings using {Utils#object_to_param}.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">  # @raise {Unconvertable} if a variable could not be converted to a string.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="75">
          <span class="hits">1</span>
          
          <code class="ruby">  def expand(variables={})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="76">
          
          
          <code class="ruby">    raise &quot;Please implement #expand on #{self.class.inspect}.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">  # @abstract</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">  # Returns the type of this template. The type is a symbol which can be used in {.resolve_class} to resolve the type of this template.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="81">
          <span class="hits">1</span>
          
          <code class="ruby">  def type</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="82">
          
          
          <code class="ruby">    raise &quot;Please implement #type on #{self.class.inspect}.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="b51222c87eeada8f9c7a5548d3fd2877b85a0b26">
  <div class="header">
    <h3>lib/uri_template/draft7.rb</h3>
    <h4><span class="green">98.39 %</span> covered</h4>
    <div>
      <b>373</b> relevant lines. 
      <span class="green"><b>367</b> lines covered</span> and
      <span class="red"><b>6</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">#    This program is free software: you can redistribute it and/or modify</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">#    it under the terms of the Affero GNU General Public License as published by</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">#    the Free Software Foundation, either version 3 of the License, or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">#    (at your option) any later version.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">#    This program is distributed in the hope that it will be useful,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">#    GNU General Public License for more details.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">#    You should have received a copy of the GNU General Public License</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">#    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">#    (c) 2011 by Hannes Georg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">require 'strscan'</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">require 'set'</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">require 'forwardable'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">require 'uri_template'</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">require 'uri_template/utils'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"># A uri template which should comply with the uri template spec draft 7 ( http://tools.ietf.org/html/draft-gregorio-uritemplate-07 ).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"># @note</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">#   Most specs and examples refer to this class directly, because they are acutally refering to this specific implementation. If you just want uri templates, you should rather use the methods on {URITemplate} to create templates since they will select an implementation.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">class URITemplate::Draft7</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">  include URITemplate</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">  extend Forwardable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">  Utils = URITemplate::Utils</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">  LITERAL = /^([^&quot;'%&lt;&gt;\\^`{|}\s\p{Cc}]|%\h\h)+/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">  CHARACTER_CLASSES = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    :unreserved =&gt; {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">      :unencoded =&gt; /([^A-Za-z0-9\-\._])/,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      :class =&gt; '(?&lt;c_u_&gt;[A-Za-z0-9\-\._]|%\h\h)',</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      :class_name =&gt; 'c_u_',</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">      :grabs_comma =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">    },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">    :unreserved_reserved_pct =&gt; {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      :unencoded =&gt; /([^A-Za-z0-9\-\._:\/?#\[\]@!\$%'\(\)*+,;=]|%(?!\h\h))/,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      :class =&gt; '(?&lt;c_urp_&gt;[A-Za-z0-9\-\._:\/?#\[\]@!\$%\'\(\)*+,;=]|%\h\h)',</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      :class_name =&gt; 'c_urp_',</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      :grabs_comma =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">    },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">    :varname =&gt; {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">      :class =&gt; '(?&lt;c_vn_&gt; (?:[a-zA-Z_]|%[0-9a-fA-F]{2})(?:[a-zA-Z_\.]|%[0-9a-fA-F]{2})*?)',</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      :class_name =&gt; 'c_vn_'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">    }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">  # Specifies that no processing should be done upon extraction.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">  # @see #extract</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="64">
          <span class="hits">1</span>
          
          <code class="ruby">  NO_PROCESSING = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">  # Specifies that the extracted values should be processed.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">  # @see #extract</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">  CONVERT_VALUES = [:convert_values]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">  # Specifies that the extracted variable list should be processed.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">  # @see #extract</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="72">
          <span class="hits">1</span>
          
          <code class="ruby">  CONVERT_RESULT = [:convert_result]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">  # Default processing. Means: convert values and the list itself.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">  # @see #extract</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="76">
          <span class="hits">1</span>
          
          <code class="ruby">  DEFAULT_PROCESSING = CONVERT_VALUES + CONVERT_RESULT</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="79">
          <span class="hits">1</span>
          
          <code class="ruby">  VAR = Regexp.compile(&lt;&lt;'__REGEXP__'.strip, Regexp::EXTENDED)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">(?&lt;operator&gt; [+#\./;?&amp;]?){0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">(?&lt;varchar&gt; [a-zA-Z_]|%[0-9a-fA-F]{2}){0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">(?&lt;varname&gt; \g&lt;varchar&gt;(?:\g&lt;varchar&gt;|\.)*){0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">(?&lt;varspec&gt; \g&lt;varname&gt;(?&lt;explode&gt;\*?)(?::(?&lt;length&gt;\d+))?){0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">\g&lt;varspec&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">__REGEXP__</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="88">
          <span class="hits">1</span>
          
          <code class="ruby">  EXPRESSION = Regexp.compile(&lt;&lt;'__REGEXP__'.strip, Regexp::EXTENDED)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">(?&lt;operator&gt; [+#\./;?&amp;]?){0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">(?&lt;varchar&gt; [a-zA-Z_]|%[0-9a-fA-F]{2}){0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">(?&lt;varname&gt; \g&lt;varchar&gt;(?:\g&lt;varchar&gt;|\.)*){0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">(?&lt;varspec&gt; \g&lt;varname&gt;\*?(?::\d+)?){0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">\{\g&lt;operator&gt;(?&lt;vars&gt;\g&lt;varspec&gt;(?:,\g&lt;varspec&gt;)*)\}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">__REGEXP__</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="97">
          <span class="hits">1</span>
          
          <code class="ruby">  URI = Regexp.compile(&lt;&lt;'__REGEXP__'.strip, Regexp::EXTENDED)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">(?&lt;operator&gt; [+#\./;?&amp;]?){0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">(?&lt;varchar&gt; [a-zA-Z_]|%[0-9a-fA-F]{2}){0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">(?&lt;varname&gt; \g&lt;varchar&gt;(?:\g&lt;varchar&gt;|\.)*){0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">(?&lt;varspec&gt; \g&lt;varname&gt;\*?(?::\d+)?){0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">^(([^&quot;'%&lt;&gt;^`{|}\s\p{Cc}]|%\h\h)+|\{\g&lt;operator&gt;(?&lt;vars&gt;\g&lt;varspec&gt;(?:,\g&lt;varspec&gt;)*)\})*$</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">__REGEXP__</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="106">
          <span class="hits">1</span>
          
          <code class="ruby">  class Token</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="110">
          <span class="hits">1</span>
          
          <code class="ruby">  class Literal &lt; Token</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="112">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :string</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="114">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(string)</code>
        </li>
      
        <li class="covered" data-hits="130" data-linenumber="115">
          <span class="hits">130</span>
          
          <code class="ruby">      @string = string</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="118">
          <span class="hits">1</span>
          
          <code class="ruby">    def size</code>
        </li>
      
        <li class="covered" data-hits="119" data-linenumber="119">
          <span class="hits">119</span>
          
          <code class="ruby">      0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="122">
          <span class="hits">1</span>
          
          <code class="ruby">    def level</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="123">
          <span class="hits">12</span>
          
          <code class="ruby">      1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="126">
          <span class="hits">1</span>
          
          <code class="ruby">    def expand(*_)</code>
        </li>
      
        <li class="covered" data-hits="76" data-linenumber="127">
          <span class="hits">76</span>
          
          <code class="ruby">      return @string</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="130">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_r_source(*_)</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="131">
          <span class="hits">42</span>
          
          <code class="ruby">      Regexp.escape(@string)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="134">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_s</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="135">
          <span class="hits">14</span>
          
          <code class="ruby">      @string</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="141">
          <span class="hits">1</span>
          
          <code class="ruby">  class Expression &lt; Token</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="143">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :variables, :max_length</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="145">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(vars)</code>
        </li>
      
        <li class="covered" data-hits="300" data-linenumber="146">
          <span class="hits">300</span>
          
          <code class="ruby">      @variables = vars</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="149">
          <span class="hits">1</span>
          
          <code class="ruby">    PREFIX = ''.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="150">
          <span class="hits">1</span>
          
          <code class="ruby">    SEPARATOR = ','.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="151">
          <span class="hits">1</span>
          
          <code class="ruby">    PAIR_CONNECTOR = '='.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="152">
          <span class="hits">1</span>
          
          <code class="ruby">    PAIR_IF_EMPTY = true</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="153">
          <span class="hits">1</span>
          
          <code class="ruby">    LIST_CONNECTOR = ','.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="154">
          <span class="hits">1</span>
          
          <code class="ruby">    BASE_LEVEL = 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="156">
          <span class="hits">1</span>
          
          <code class="ruby">    CHARACTER_CLASS = CHARACTER_CLASSES[:unreserved]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="158">
          <span class="hits">1</span>
          
          <code class="ruby">    NAMED = false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="159">
          <span class="hits">1</span>
          
          <code class="ruby">    OPERATOR = ''</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="161">
          <span class="hits">1</span>
          
          <code class="ruby">    def size</code>
        </li>
      
        <li class="covered" data-hits="692" data-linenumber="162">
          <span class="hits">692</span>
          
          <code class="ruby">      @variables.size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="165">
          <span class="hits">1</span>
          
          <code class="ruby">    def level</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="166">
          <span class="hits">56</span>
          
          <code class="ruby">      if @variables.none?{|_,expand,ml| expand || (ml &gt; 0) }</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="167">
          <span class="hits">15</span>
          
          <code class="ruby">        if @variables.size == 1</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="168">
          <span class="hits">9</span>
          
          <code class="ruby">          return self.class::BASE_LEVEL</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="170">
          <span class="hits">6</span>
          
          <code class="ruby">          return 3</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="173">
          <span class="hits">9</span>
          
          <code class="ruby">        return 4</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="177">
          <span class="hits">1</span>
          
          <code class="ruby">    def expand( vars, options )</code>
        </li>
      
        <li class="covered" data-hits="234" data-linenumber="178">
          <span class="hits">234</span>
          
          <code class="ruby">      result = []</code>
        </li>
      
        <li class="covered" data-hits="234" data-linenumber="179">
          <span class="hits">234</span>
          
          <code class="ruby">      variables.each{| var, expand , max_length |</code>
        </li>
      
        <li class="covered" data-hits="318" data-linenumber="180">
          <span class="hits">318</span>
          
          <code class="ruby">        unless vars[var].nil?</code>
        </li>
      
        <li class="covered" data-hits="293" data-linenumber="181">
          <span class="hits">293</span>
          
          <code class="ruby">          if vars[var].kind_of? Hash</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="182">
          <span class="hits">29</span>
          
          <code class="ruby">            result.push( *transform_hash(var, vars[var], expand, max_length) )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">          elsif vars[var].kind_of? Array</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="184">
          <span class="hits">52</span>
          
          <code class="ruby">            result.push( *transform_array(var, vars[var], expand, max_length) )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="212" data-linenumber="186">
          <span class="hits">212</span>
          
          <code class="ruby">            if self.class::NAMED</code>
        </li>
      
        <li class="covered" data-hits="72" data-linenumber="187">
          <span class="hits">72</span>
          
          <code class="ruby">              result.push( pair(var, vars[var], max_length) )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="140" data-linenumber="189">
          <span class="hits">140</span>
          
          <code class="ruby">              result.push( cut( encode(vars[var]), max_length ) )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="covered" data-hits="234" data-linenumber="194">
          <span class="hits">234</span>
          
          <code class="ruby">      if result.any?</code>
        </li>
      
        <li class="covered" data-hits="223" data-linenumber="195">
          <span class="hits">223</span>
          
          <code class="ruby">        return (self.class::PREFIX + result.join(self.class::SEPARATOR))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="197">
          <span class="hits">11</span>
          
          <code class="ruby">        return ''</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="201">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_s</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="202">
          <span class="hits">8</span>
          
          <code class="ruby">      '{' + self.class::OPERATOR +  @variables.map{|name,expand,max_length| name +(expand ? '*': '') + (max_length &gt; 0 ? ':'+max_length.to_s : '') }.join(',') + '}'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">    #TODO: certain things after a slurpy variable will never get matched. therefore, it's pointless to add expressions for them</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby">    #TODO: variables, which appear twice could be compacted, don't they?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="207">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_r_source(base_counter = 0)</code>
        </li>
      
        <li class="covered" data-hits="127" data-linenumber="208">
          <span class="hits">127</span>
          
          <code class="ruby">      source = []</code>
        </li>
      
        <li class="covered" data-hits="127" data-linenumber="209">
          <span class="hits">127</span>
          
          <code class="ruby">      first = true</code>
        </li>
      
        <li class="covered" data-hits="127" data-linenumber="210">
          <span class="hits">127</span>
          
          <code class="ruby">      vs = variables.size - 1</code>
        </li>
      
        <li class="covered" data-hits="127" data-linenumber="211">
          <span class="hits">127</span>
          
          <code class="ruby">      i = 0</code>
        </li>
      
        <li class="covered" data-hits="127" data-linenumber="212">
          <span class="hits">127</span>
          
          <code class="ruby">      if self.class::NAMED</code>
        </li>
      
        <li class="covered" data-hits="41" data-linenumber="213">
          <span class="hits">41</span>
          
          <code class="ruby">        variables.each{| var, expand , max_length |</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="214">
          <span class="hits">62</span>
          
          <code class="ruby">          last = (vs == i)</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="215">
          <span class="hits">62</span>
          
          <code class="ruby">          value = &quot;(?:\\g&lt;#{self.class::CHARACTER_CLASS[:class_name]}&gt;|,)#{(max_length &gt; 0)?'{,'+max_length.to_s+'}':'*'}&quot;</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="216">
          <span class="hits">62</span>
          
          <code class="ruby">          if expand</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">            #if self.class::PAIR_IF_EMPTY</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="218">
          <span class="hits">11</span>
          
          <code class="ruby">            pair = &quot;(?:\\g&lt;c_vn_&gt;#{Regexp.escape(self.class::PAIR_CONNECTOR)})?#{value}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">            </code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="220">
          <span class="hits">11</span>
          
          <code class="ruby">            if first</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="221">
          <span class="hits">10</span>
          
          <code class="ruby">              source &lt;&lt; &quot;(?&lt;v#{base_counter + i}&gt;(?:#{pair})(?:#{Regexp.escape(self.class::SEPARATOR)}#{pair})*)&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="223">
          <span class="hits">1</span>
          
          <code class="ruby">              source &lt;&lt; &quot;(?&lt;v#{base_counter + i}&gt;(?:#{Regexp.escape(self.class::SEPARATOR)}#{pair})*)&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="51" data-linenumber="226">
          <span class="hits">51</span>
          
          <code class="ruby">            if self.class::PAIR_IF_EMPTY</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="227">
          <span class="hits">31</span>
          
          <code class="ruby">              pair = &quot;#{Regexp.escape(var)}(?&lt;v#{base_counter + i}&gt;#{Regexp.escape(self.class::PAIR_CONNECTOR)}#{value})?&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="229">
          <span class="hits">20</span>
          
          <code class="ruby">              pair = &quot;#{Regexp.escape(var)}(?&lt;v#{base_counter + i}&gt;#{Regexp.escape(self.class::PAIR_CONNECTOR)}#{value}|)&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">            </code>
        </li>
      
        <li class="covered" data-hits="51" data-linenumber="232">
          <span class="hits">51</span>
          
          <code class="ruby">            if first</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="233">
          <span class="hits">31</span>
          
          <code class="ruby">            source &lt;&lt; &quot;(?:#{pair})&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="235">
          <span class="hits">20</span>
          
          <code class="ruby">              source &lt;&lt; &quot;(?:#{Regexp.escape(self.class::SEPARATOR)}#{pair})?&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">          </code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="239">
          <span class="hits">62</span>
          
          <code class="ruby">          first = false</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="240">
          <span class="hits">62</span>
          
          <code class="ruby">          i = i+1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">        }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="243">
          <span class="hits">86</span>
          
          <code class="ruby">        variables.each{| var, expand , max_length |</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="244">
          <span class="hits">109</span>
          
          <code class="ruby">          last = (vs == i)</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="245">
          <span class="hits">109</span>
          
          <code class="ruby">          if expand</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">            # could be list or map, too</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="247">
          <span class="hits">16</span>
          
          <code class="ruby">            value = &quot;\\g&lt;#{self.class::CHARACTER_CLASS[:class_name]}&gt;#{(max_length &gt; 0)?'{,'+max_length.to_s+'}':'*'}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby">            </code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="249">
          <span class="hits">16</span>
          
          <code class="ruby">            pair = &quot;(?:\\g&lt;c_vn_&gt;#{Regexp.escape(self.class::PAIR_CONNECTOR)})?#{value}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">            </code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="251">
          <span class="hits">16</span>
          
          <code class="ruby">            value = &quot;#{pair}(?:#{Regexp.escape(self.class::SEPARATOR)}#{pair})*&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">          elsif last</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby">            # the last will slurp lists</code>
        </li>
      
        <li class="covered" data-hits="72" data-linenumber="254">
          <span class="hits">72</span>
          
          <code class="ruby">            if self.class::CHARACTER_CLASS[:grabs_comma]</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="255">
          <span class="hits">25</span>
          
          <code class="ruby">              value = &quot;(?:\\g&lt;#{self.class::CHARACTER_CLASS[:class_name]}&gt;)#{(max_length &gt; 0)?'{,'+max_length.to_s+'}':'*?'}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="257">
          <span class="hits">47</span>
          
          <code class="ruby">              value = &quot;(?:\\g&lt;#{self.class::CHARACTER_CLASS[:class_name]}&gt;|,)#{(max_length &gt; 0)?'{,'+max_length.to_s+'}':'*?'}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="260">
          <span class="hits">21</span>
          
          <code class="ruby">            value = &quot;\\g&lt;#{self.class::CHARACTER_CLASS[:class_name]}&gt;#{(max_length &gt; 0)?'{,'+max_length.to_s+'}':'*?'}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="262">
          <span class="hits">109</span>
          
          <code class="ruby">          if first</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="263">
          <span class="hits">86</span>
          
          <code class="ruby">            source &lt;&lt; &quot;(?&lt;v#{base_counter + i}&gt;#{value})&quot;</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="264">
          <span class="hits">86</span>
          
          <code class="ruby">            first = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="266">
          <span class="hits">23</span>
          
          <code class="ruby">            source &lt;&lt; &quot;(?:#{Regexp.escape(self.class::SEPARATOR)}(?&lt;v#{base_counter + i}&gt;#{value}))?&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="268">
          <span class="hits">109</span>
          
          <code class="ruby">          i = i+1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">        }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="127" data-linenumber="271">
          <span class="hits">127</span>
          
          <code class="ruby">      return '(?:' + Regexp.escape(self.class::PREFIX) + source.join + ')?'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="273">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="274">
          <span class="hits">1</span>
          
          <code class="ruby">    def extract(position,matched)</code>
        </li>
      
        <li class="covered" data-hits="325" data-linenumber="275">
          <span class="hits">325</span>
          
          <code class="ruby">      name, expand, max_length = @variables[position]</code>
        </li>
      
        <li class="covered" data-hits="325" data-linenumber="276">
          <span class="hits">325</span>
          
          <code class="ruby">      if matched.nil?</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="277">
          <span class="hits">25</span>
          
          <code class="ruby">        return [[ name , matched ]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="300" data-linenumber="279">
          <span class="hits">300</span>
          
          <code class="ruby">      if expand</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="280">
          <span class="hits">47</span>
          
          <code class="ruby">        ex = self.hash_extractor(max_length)</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="281">
          <span class="hits">47</span>
          
          <code class="ruby">        rest = matched</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="282">
          <span class="hits">47</span>
          
          <code class="ruby">        splitted = []</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="283">
          <span class="hits">47</span>
          
          <code class="ruby">        found_value = false</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="284">
          <span class="hits">47</span>
          
          <code class="ruby">        until rest.size == 0</code>
        </li>
      
        <li class="covered" data-hits="129" data-linenumber="285">
          <span class="hits">129</span>
          
          <code class="ruby">          match = ex.match(rest)</code>
        </li>
      
        <li class="covered" data-hits="129" data-linenumber="286">
          <span class="hits">129</span>
          
          <code class="ruby">          if match.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="287">
          
          
          <code class="ruby">            raise &quot;Couldn't match #{rest.inspect} againts the hash extractor. This is definitly a Bug. Please report this ASAP!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="129" data-linenumber="289">
          <span class="hits">129</span>
          
          <code class="ruby">          if match.post_match.size == 0</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="290">
          <span class="hits">47</span>
          
          <code class="ruby">            rest = match['rest'].to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="291">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="292">
          <span class="hits">82</span>
          
          <code class="ruby">            rest = ''</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="293">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="129" data-linenumber="294">
          <span class="hits">129</span>
          
          <code class="ruby">          if match['name']</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="295">
          <span class="hits">62</span>
          
          <code class="ruby">            found_value = true</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="296">
          <span class="hits">62</span>
          
          <code class="ruby">            splitted &lt;&lt; [ match['name'][0..-2], decode(match['value'] + rest , false) ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="298">
          <span class="hits">67</span>
          
          <code class="ruby">            splitted &lt;&lt; [ match['value'] + rest, nil ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="129" data-linenumber="300">
          <span class="hits">129</span>
          
          <code class="ruby">          rest = match.post_match</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="302">
          <span class="hits">47</span>
          
          <code class="ruby">        if !found_value</code>
        </li>
      
        <li class="covered" data-hits="89" data-linenumber="303">
          <span class="hits">89</span>
          
          <code class="ruby">          return [ [ name, splitted.map{|n,v| decode(n , false) } ] ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="305">
          <span class="hits">24</span>
          
          <code class="ruby">          return [ [ name, splitted ] ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby">      elsif self.class::NAMED</code>
        </li>
      
        <li class="covered" data-hits="90" data-linenumber="308">
          <span class="hits">90</span>
          
          <code class="ruby">        return [ [ name, decode( matched[1..-1] ) ] ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="163" data-linenumber="311">
          <span class="hits">163</span>
          
          <code class="ruby">      return [ [ name,  decode( matched ) ] ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="314">
          <span class="hits">1</span>
          
          <code class="ruby">    def variable_names</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="315">
          <span class="hits">11</span>
          
          <code class="ruby">      @variables.collect(&amp;:first)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby">     </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="318">
          <span class="hits">1</span>
          
          <code class="ruby">  protected</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="320">
          <span class="hits">1</span>
          
          <code class="ruby">    def hash_extractor(max_length)</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="321">
          <span class="hits">47</span>
          
          <code class="ruby">      value = &quot;\\g&lt;#{self.class::CHARACTER_CLASS[:class_name]}&gt;#{(max_length &gt; 0)?'{,'+max_length.to_s+'}':'*?'}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="323">
          <span class="hits">47</span>
          
          <code class="ruby">      pair = &quot;(?&lt;name&gt;\\g&lt;c_vn_&gt;#{Regexp.escape(self.class::PAIR_CONNECTOR)})?(?&lt;value&gt;#{value})&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="324">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="325">
          <span class="hits">47</span>
          
          <code class="ruby">      return Regexp.new( CHARACTER_CLASSES[:varname][:class] + &quot;{0}\n&quot; + self.class::CHARACTER_CLASS[:class] + &quot;{0}\n&quot;  + &quot;^#{Regexp.escape(self.class::SEPARATOR)}?&quot; + pair + &quot;(?&lt;rest&gt;$|#{Regexp.escape(self.class::SEPARATOR)}(?!#{Regexp.escape(self.class::SEPARATOR)}))&quot; ,Regexp::EXTENDED)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="327">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="329">
          <span class="hits">1</span>
          
          <code class="ruby">    def encode(x)</code>
        </li>
      
        <li class="covered" data-hits="630" data-linenumber="330">
          <span class="hits">630</span>
          
          <code class="ruby">      Utils.pct(Utils.object_to_param(x), self.class::CHARACTER_CLASS[:unencoded])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="331">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="333">
          <span class="hits">1</span>
          
          <code class="ruby">    SPLITTER = /^(?:,(,*)|([^,]+))/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="335">
          <span class="hits">1</span>
          
          <code class="ruby">    def decode(x, split = true)</code>
        </li>
      
        <li class="covered" data-hits="381" data-linenumber="336">
          <span class="hits">381</span>
          
          <code class="ruby">      if x.nil?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="337">
          <span class="hits">6</span>
          
          <code class="ruby">        if self.class::PAIR_IF_EMPTY</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="338">
          
          
          <code class="ruby">          return x</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="339">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="340">
          <span class="hits">6</span>
          
          <code class="ruby">          return ''</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="375" data-linenumber="342">
          <span class="hits">375</span>
          
          <code class="ruby">      elsif split</code>
        </li>
      
        <li class="covered" data-hits="247" data-linenumber="343">
          <span class="hits">247</span>
          
          <code class="ruby">        r = []</code>
        </li>
      
        <li class="covered" data-hits="247" data-linenumber="344">
          <span class="hits">247</span>
          
          <code class="ruby">        v = x</code>
        </li>
      
        <li class="covered" data-hits="247" data-linenumber="345">
          <span class="hits">247</span>
          
          <code class="ruby">        until v.size == 0</code>
        </li>
      
        <li class="covered" data-hits="455" data-linenumber="346">
          <span class="hits">455</span>
          
          <code class="ruby">          m = SPLITTER.match(v)</code>
        </li>
      
        <li class="covered" data-hits="455" data-linenumber="347">
          <span class="hits">455</span>
          
          <code class="ruby">          if m[1] and m[1].size &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="348">
          <span class="hits">4</span>
          
          <code class="ruby">            r &lt;&lt; m[1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">          elsif m[2]</code>
        </li>
      
        <li class="covered" data-hits="339" data-linenumber="350">
          <span class="hits">339</span>
          
          <code class="ruby">            r &lt;&lt; Utils.dpct(m[2])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="351">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="455" data-linenumber="352">
          <span class="hits">455</span>
          
          <code class="ruby">          v = m.post_match</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="353">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="247" data-linenumber="354">
          <span class="hits">247</span>
          
          <code class="ruby">        case(r.size)</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="355">
          <span class="hits">20</span>
          
          <code class="ruby">          when 0 then ''</code>
        </li>
      
        <li class="covered" data-hits="193" data-linenumber="356">
          <span class="hits">193</span>
          
          <code class="ruby">          when 1 then r.first</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="357">
          <span class="hits">34</span>
          
          <code class="ruby">          else r</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="359">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="360">
          <span class="hits">128</span>
          
          <code class="ruby">        Utils.dpct(x)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="362">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="363">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="364">
          <span class="hits">1</span>
          
          <code class="ruby">    def cut(str,chars)</code>
        </li>
      
        <li class="covered" data-hits="263" data-linenumber="365">
          <span class="hits">263</span>
          
          <code class="ruby">      if chars &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="366">
          <span class="hits">19</span>
          
          <code class="ruby">        md = Regexp.compile(&quot;^#{self.class::CHARACTER_CLASS[:class]}{,#{chars.to_s}}&quot;, Regexp::EXTENDED).match(str)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="367">
          
          
          <code class="ruby">        #TODO: handle invalid matches</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="368">
          <span class="hits">19</span>
          
          <code class="ruby">        return md[0]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="369">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="244" data-linenumber="370">
          <span class="hits">244</span>
          
          <code class="ruby">        return str</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="371">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="372">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="373">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="374">
          <span class="hits">1</span>
          
          <code class="ruby">    def pair(key, value, max_length = 0)</code>
        </li>
      
        <li class="covered" data-hits="129" data-linenumber="375">
          <span class="hits">129</span>
          
          <code class="ruby">      ek = encode(key)</code>
        </li>
      
        <li class="covered" data-hits="129" data-linenumber="376">
          <span class="hits">129</span>
          
          <code class="ruby">      ev = encode(value)</code>
        </li>
      
        <li class="covered" data-hits="129" data-linenumber="377">
          <span class="hits">129</span>
          
          <code class="ruby">      if !self.class::PAIR_IF_EMPTY and ev.size == 0</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="378">
          <span class="hits">6</span>
          
          <code class="ruby">        return ek</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="123" data-linenumber="380">
          <span class="hits">123</span>
          
          <code class="ruby">        return ek + self.class::PAIR_CONNECTOR + cut( ev, max_length )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="381">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="382">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="383">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="384">
          <span class="hits">1</span>
          
          <code class="ruby">    def transform_hash(name, hsh, expand , max_length)</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="385">
          <span class="hits">29</span>
          
          <code class="ruby">      if expand</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="386">
          <span class="hits">78</span>
          
          <code class="ruby">        hsh.map{|key,value| pair(key,value) }</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="387">
          <span class="hits">8</span>
          
          <code class="ruby">      elsif hsh.none?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="388">
          
          
          <code class="ruby">        []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="389">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="390">
          <span class="hits">32</span>
          
          <code class="ruby">        [ (self.class::NAMED ? encode(name)+self.class::PAIR_CONNECTOR : '' ) + hsh.map{|key,value| encode(key)+self.class::LIST_CONNECTOR+encode(value) }.join(self.class::LIST_CONNECTOR) ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="391">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="392">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="393">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="394">
          <span class="hits">1</span>
          
          <code class="ruby">    def transform_array(name, ary, expand , max_length)</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="395">
          <span class="hits">52</span>
          
          <code class="ruby">      if expand</code>
        </li>
      
        <li class="covered" data-hits="93" data-linenumber="396">
          <span class="hits">93</span>
          
          <code class="ruby">        ary.map{|value| encode(value) }</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="397">
          <span class="hits">27</span>
          
          <code class="ruby">      elsif ary.none?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="398">
          <span class="hits">1</span>
          
          <code class="ruby">        []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="399">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="400">
          <span class="hits">128</span>
          
          <code class="ruby">        [ (self.class::NAMED ? encode(name)+self.class::PAIR_CONNECTOR : '' ) + ary.map{|value| encode(value) }.join(self.class::LIST_CONNECTOR) ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="401">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="402">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="403">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="404">
          <span class="hits">1</span>
          
          <code class="ruby">    class Reserved &lt; self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="405">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="406">
          <span class="hits">1</span>
          
          <code class="ruby">      CHARACTER_CLASS = CHARACTER_CLASSES[:unreserved_reserved_pct]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="407">
          <span class="hits">1</span>
          
          <code class="ruby">      OPERATOR = '+'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="408">
          <span class="hits">1</span>
          
          <code class="ruby">      BASE_LEVEL = 2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="409">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="410">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="411">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="412">
          <span class="hits">1</span>
          
          <code class="ruby">    class Fragment &lt; self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="413">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="414">
          <span class="hits">1</span>
          
          <code class="ruby">      CHARACTER_CLASS = CHARACTER_CLASSES[:unreserved_reserved_pct]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="415">
          <span class="hits">1</span>
          
          <code class="ruby">      PREFIX = '#'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="416">
          <span class="hits">1</span>
          
          <code class="ruby">      OPERATOR = '#'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="417">
          <span class="hits">1</span>
          
          <code class="ruby">      BASE_LEVEL = 2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="418">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="419">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="420">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="421">
          <span class="hits">1</span>
          
          <code class="ruby">    class Label &lt; self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="422">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="423">
          <span class="hits">1</span>
          
          <code class="ruby">      SEPARATOR = '.'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="424">
          <span class="hits">1</span>
          
          <code class="ruby">      PREFIX = '.'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="425">
          <span class="hits">1</span>
          
          <code class="ruby">      OPERATOR = '.'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="426">
          <span class="hits">1</span>
          
          <code class="ruby">      BASE_LEVEL = 3</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="427">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="428">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="429">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="430">
          <span class="hits">1</span>
          
          <code class="ruby">    class Path &lt; self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="432">
          <span class="hits">1</span>
          
          <code class="ruby">      SEPARATOR = '/'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="433">
          <span class="hits">1</span>
          
          <code class="ruby">      PREFIX = '/'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="434">
          <span class="hits">1</span>
          
          <code class="ruby">      OPERATOR = '/'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="435">
          <span class="hits">1</span>
          
          <code class="ruby">      BASE_LEVEL = 3</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="436">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="437">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="438">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="439">
          <span class="hits">1</span>
          
          <code class="ruby">    class PathParameters &lt; self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="441">
          <span class="hits">1</span>
          
          <code class="ruby">      SEPARATOR = ';'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="442">
          <span class="hits">1</span>
          
          <code class="ruby">      PREFIX = ';'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="443">
          <span class="hits">1</span>
          
          <code class="ruby">      NAMED = true</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="444">
          <span class="hits">1</span>
          
          <code class="ruby">      PAIR_IF_EMPTY = false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="445">
          <span class="hits">1</span>
          
          <code class="ruby">      OPERATOR = ';'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="446">
          <span class="hits">1</span>
          
          <code class="ruby">      BASE_LEVEL = 3</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="447">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="448">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="449">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="450">
          <span class="hits">1</span>
          
          <code class="ruby">    class FormQuery &lt; self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="452">
          <span class="hits">1</span>
          
          <code class="ruby">      SEPARATOR = '&amp;'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="453">
          <span class="hits">1</span>
          
          <code class="ruby">      PREFIX = '?'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="454">
          <span class="hits">1</span>
          
          <code class="ruby">      NAMED = true</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="455">
          <span class="hits">1</span>
          
          <code class="ruby">      OPERATOR = '?'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="456">
          <span class="hits">1</span>
          
          <code class="ruby">      BASE_LEVEL = 3</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="457">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="458">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="459">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="460">
          <span class="hits">1</span>
          
          <code class="ruby">    class FormQueryContinuation &lt; self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="461">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="462">
          <span class="hits">1</span>
          
          <code class="ruby">      SEPARATOR = '&amp;'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="463">
          <span class="hits">1</span>
          
          <code class="ruby">      PREFIX = '&amp;'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="464">
          <span class="hits">1</span>
          
          <code class="ruby">      NAMED = true</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="465">
          <span class="hits">1</span>
          
          <code class="ruby">      OPERATOR = '&amp;'.freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="466">
          <span class="hits">1</span>
          
          <code class="ruby">      BASE_LEVEL = 3</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="467">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="468">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="469">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="470">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="471">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="472">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="473">
          <span class="hits">1</span>
          
          <code class="ruby">  OPERATORS = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby">    ''  =&gt; Expression,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="475">
          
          
          <code class="ruby">    '+' =&gt; Expression::Reserved,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="476">
          
          
          <code class="ruby">    '#' =&gt; Expression::Fragment,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="477">
          
          
          <code class="ruby">    '.' =&gt; Expression::Label,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="478">
          
          
          <code class="ruby">    '/' =&gt; Expression::Path,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="479">
          
          
          <code class="ruby">    ';' =&gt; Expression::PathParameters,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="480">
          
          
          <code class="ruby">    '?' =&gt; Expression::FormQuery,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="481">
          
          
          <code class="ruby">    '&amp;' =&gt; Expression::FormQueryContinuation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="482">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="483">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="484">
          
          
          <code class="ruby">  # This error is raised when an invalid pattern was given.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="485">
          <span class="hits">1</span>
          
          <code class="ruby">  class Invalid &lt; StandardError</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="486">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="487">
          <span class="hits">1</span>
          
          <code class="ruby">    include URITemplate::Invalid</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="488">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="489">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :pattern, :position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="490">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="491">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(source, position)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="492">
          <span class="hits">5</span>
          
          <code class="ruby">      @pattern = pattern</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="493">
          <span class="hits">5</span>
          
          <code class="ruby">      @position = position</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="494">
          <span class="hits">5</span>
          
          <code class="ruby">      super(&quot;Invalid expression found in #{source.inspect} at #{position}: '#{source[position..-1]}'&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="495">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="496">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="497">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="498">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="499">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="500">
          <span class="hits">1</span>
          
          <code class="ruby">  class Tokenizer</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="501">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="502">
          <span class="hits">1</span>
          
          <code class="ruby">    include Enumerable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="503">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="504">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :source</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="505">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="506">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(source)</code>
        </li>
      
        <li class="covered" data-hits="310" data-linenumber="507">
          <span class="hits">310</span>
          
          <code class="ruby">      @source = source</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="508">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="509">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="510">
          <span class="hits">1</span>
          
          <code class="ruby">    def each</code>
        </li>
      
        <li class="covered" data-hits="310" data-linenumber="511">
          <span class="hits">310</span>
          
          <code class="ruby">      if !block_given?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="512">
          
          
          <code class="ruby">        return Enumerator.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="513">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="310" data-linenumber="514">
          <span class="hits">310</span>
          
          <code class="ruby">      scanner = StringScanner.new(@source)</code>
        </li>
      
        <li class="covered" data-hits="310" data-linenumber="515">
          <span class="hits">310</span>
          
          <code class="ruby">      until scanner.eos?</code>
        </li>
      
        <li class="covered" data-hits="426" data-linenumber="516">
          <span class="hits">426</span>
          
          <code class="ruby">        expression = scanner.scan(EXPRESSION)</code>
        </li>
      
        <li class="covered" data-hits="426" data-linenumber="517">
          <span class="hits">426</span>
          
          <code class="ruby">        if expression</code>
        </li>
      
        <li class="covered" data-hits="300" data-linenumber="518">
          <span class="hits">300</span>
          
          <code class="ruby">          vars = scanner[5].split(',').map{|name|</code>
        </li>
      
        <li class="covered" data-hits="400" data-linenumber="519">
          <span class="hits">400</span>
          
          <code class="ruby">            match = VAR.match(name)</code>
        </li>
      
        <li class="covered" data-hits="400" data-linenumber="520">
          <span class="hits">400</span>
          
          <code class="ruby">            [ match['varname'], match['explode'] == '*', match['length'].to_i ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="521">
          
          
          <code class="ruby">          }</code>
        </li>
      
        <li class="covered" data-hits="300" data-linenumber="522">
          <span class="hits">300</span>
          
          <code class="ruby">          yield OPERATORS[scanner[1]].new(vars)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="523">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="126" data-linenumber="524">
          <span class="hits">126</span>
          
          <code class="ruby">          literal = scanner.scan(LITERAL)</code>
        </li>
      
        <li class="covered" data-hits="126" data-linenumber="525">
          <span class="hits">126</span>
          
          <code class="ruby">          if literal</code>
        </li>
      
        <li class="covered" data-hits="121" data-linenumber="526">
          <span class="hits">121</span>
          
          <code class="ruby">            yield(Literal.new(literal))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="527">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="528">
          <span class="hits">5</span>
          
          <code class="ruby">            raise Invalid.new(@source,scanner.pos)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="529">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="530">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="531">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="532">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="533">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="534">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="535">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="536">
          
          
          <code class="ruby">  # The class methods for all draft7 templates.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="537">
          <span class="hits">1</span>
          
          <code class="ruby">  module ClassMethods</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="538">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="539">
          
          
          <code class="ruby">    # Tries to convert the given param in to a instance of {Draft7}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="540">
          
          
          <code class="ruby">    # It basically passes thru instances of that class, parses strings and return nil on everything else.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="541">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="542">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="543">
          
          
          <code class="ruby">    #   URITemplate::Draft7.try_convert( Object.new ) #=&gt; nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="544">
          
          
          <code class="ruby">    #   tpl = URITemplate::Draft7.new('{foo}')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="545">
          
          
          <code class="ruby">    #   URITemplate::Draft7.try_convert( tpl ) #=&gt; tpl</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="546">
          
          
          <code class="ruby">    #   URITemplate::Draft7.try_convert('{foo}') #=&gt; tpl</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="547">
          
          
          <code class="ruby">    #   # This pattern is invalid, so it wont be parsed:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="548">
          
          
          <code class="ruby">    #   URITemplate::Draft7.try_convert('{foo') #=&gt; nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="549">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="550">
          <span class="hits">1</span>
          
          <code class="ruby">    def try_convert(x)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="551">
          <span class="hits">18</span>
          
          <code class="ruby">      if x.kind_of? self</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="552">
          <span class="hits">1</span>
          
          <code class="ruby">        return x</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="553">
          <span class="hits">17</span>
          
          <code class="ruby">      elsif x.kind_of? String and valid? x</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="554">
          <span class="hits">15</span>
          
          <code class="ruby">        return new(x)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="555">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="556">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="557">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="558">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="559">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="560">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="561">
          
          
          <code class="ruby">    # Like {.try_convert}, but raises an ArgumentError, when the conversion failed.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="562">
          
          
          <code class="ruby">    # </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="563">
          
          
          <code class="ruby">    # @raise ArgumentError</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="564">
          <span class="hits">1</span>
          
          <code class="ruby">    def convert(x)</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="565">
          <span class="hits">14</span>
          
          <code class="ruby">      o = self.try_convert(x)</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="566">
          <span class="hits">14</span>
          
          <code class="ruby">      if o.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="567">
          
          
          <code class="ruby">        raise ArgumentError, &quot;Expected to receive something that can be converted to an #{self.class}, but got: #{x.inspect}.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="568">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="569">
          <span class="hits">14</span>
          
          <code class="ruby">        return o</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="570">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="571">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="572">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="573">
          
          
          <code class="ruby">    # Tests whether a given pattern is a valid template pattern.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="574">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="575">
          
          
          <code class="ruby">    #   URITemplate::Draft7.valid? 'foo' #=&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="576">
          
          
          <code class="ruby">    #   URITemplate::Draft7.valid? '{foo}' #=&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="577">
          
          
          <code class="ruby">    #   URITemplate::Draft7.valid? '{foo' #=&gt; false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="578">
          <span class="hits">1</span>
          
          <code class="ruby">    def valid?(pattern)</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="579">
          <span class="hits">128</span>
          
          <code class="ruby">      URI === pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="580">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="581">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="582">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="583">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="584">
          <span class="hits">1</span>
          
          <code class="ruby">  extend ClassMethods</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="585">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="586">
          <span class="hits">1</span>
          
          <code class="ruby">  attr_reader :pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="587">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="588">
          <span class="hits">1</span>
          
          <code class="ruby">  attr_reader :options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="589">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="590">
          
          
          <code class="ruby">  # @param String,Array either a pattern as String or an Array of tokens</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="591">
          
          
          <code class="ruby">  # @param Hash some options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="592">
          
          
          <code class="ruby">  # @option :lazy If true the pattern will be parsed on first access, this also means that syntax errors will not be detected unless accessed.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="593">
          <span class="hits">1</span>
          
          <code class="ruby">  def initialize(pattern_or_tokens,options={})</code>
        </li>
      
        <li class="covered" data-hits="321" data-linenumber="594">
          <span class="hits">321</span>
          
          <code class="ruby">    @options = options.dup.freeze</code>
        </li>
      
        <li class="covered" data-hits="321" data-linenumber="595">
          <span class="hits">321</span>
          
          <code class="ruby">    if pattern_or_tokens.kind_of? String</code>
        </li>
      
        <li class="covered" data-hits="310" data-linenumber="596">
          <span class="hits">310</span>
          
          <code class="ruby">      @pattern = pattern_or_tokens.dup</code>
        </li>
      
        <li class="covered" data-hits="310" data-linenumber="597">
          <span class="hits">310</span>
          
          <code class="ruby">      @pattern.freeze</code>
        </li>
      
        <li class="covered" data-hits="310" data-linenumber="598">
          <span class="hits">310</span>
          
          <code class="ruby">      unless @options[:lazy]</code>
        </li>
      
        <li class="covered" data-hits="310" data-linenumber="599">
          <span class="hits">310</span>
          
          <code class="ruby">        self.tokens</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="600">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="601">
          <span class="hits">11</span>
          
          <code class="ruby">    elsif pattern_or_tokens.kind_of? Array</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="602">
          <span class="hits">10</span>
          
          <code class="ruby">      @tokens = pattern_or_tokens.dup</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="603">
          <span class="hits">10</span>
          
          <code class="ruby">      @tokens.freeze</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="604">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="605">
          <span class="hits">1</span>
          
          <code class="ruby">      raise ArgumentError, &quot;Expected to receive a pattern string, but got #{pattern_or_tokens.inspect}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="606">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="607">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="608">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="609">
          
          
          <code class="ruby">  # Expands the template with the given variables.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="610">
          
          
          <code class="ruby">  # The expansion should be compatible to uritemplate spec draft 7 ( http://tools.ietf.org/html/draft-gregorio-uritemplate-07 ).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="611">
          
          
          <code class="ruby">  # @note</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="612">
          
          
          <code class="ruby">  #   All keys of the supplied hash should be strings as anything else won't be recognised.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="613">
          
          
          <code class="ruby">  # @note</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="614">
          
          
          <code class="ruby">  #   There are neither default values for variables nor will anything be raised if a variable is missing. Please read the spec if you want to know how undefined variables are handled.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="615">
          
          
          <code class="ruby">  # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="616">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('{foo}').expand('foo'=&gt;'bar') #=&gt; 'bar'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="617">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('{?args*}').expand('args'=&gt;{'key'=&gt;'value'}) #=&gt; '?key=value'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="618">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('{undef}').expand() #=&gt; ''</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="619">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="620">
          
          
          <code class="ruby">  # @param variables Hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="621">
          
          
          <code class="ruby">  # @return String</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="622">
          <span class="hits">1</span>
          
          <code class="ruby">  def expand(variables = {})</code>
        </li>
      
        <li class="covered" data-hits="224" data-linenumber="623">
          <span class="hits">224</span>
          
          <code class="ruby">    tokens.map{|part|</code>
        </li>
      
        <li class="covered" data-hits="310" data-linenumber="624">
          <span class="hits">310</span>
          
          <code class="ruby">      part.expand(variables, {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="625">
          
          
          <code class="ruby">    }.join</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="626">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="627">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="628">
          
          
          <code class="ruby">  # Returns an array containing all variables. Repeated variables are ignored, but the order will be kept intact.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="629">
          
          
          <code class="ruby">  # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="630">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('{foo}{bar}{baz}').variables #=&gt; ['foo','bar','baz']</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="631">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('{a}{c}{a}{b}').variables #=&gt; ['c','a','b']</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="632">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="633">
          
          
          <code class="ruby">  # @return Array</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="634">
          <span class="hits">1</span>
          
          <code class="ruby">  def variables</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="635">
          
          
          <code class="ruby">    @variables ||= begin</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="636">
          <span class="hits">3</span>
          
          <code class="ruby">      vars = []</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="637">
          <span class="hits">3</span>
          
          <code class="ruby">      tokens.each{|token|</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="638">
          <span class="hits">11</span>
          
          <code class="ruby">        if token.respond_to? :variable_names</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="639">
          <span class="hits">11</span>
          
          <code class="ruby">          vn = token.variable_names.uniq</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="640">
          <span class="hits">11</span>
          
          <code class="ruby">          vars -= vn</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="641">
          <span class="hits">11</span>
          
          <code class="ruby">          vars.push(*vn)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="642">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="643">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="644">
          <span class="hits">3</span>
          
          <code class="ruby">      vars</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="645">
          <span class="hits">3</span>
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="646">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="647">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="648">
          
          
          <code class="ruby">  # Compiles this template into a regular expression which can be used to test whether a given uri matches this template. This template is also used for {#===}.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="649">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="650">
          
          
          <code class="ruby">  # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="651">
          
          
          <code class="ruby">  #   tpl = URITemplate::Draft7.new('/foo/{bar}/')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="652">
          
          
          <code class="ruby">  #   regex = tpl.to_r</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="653">
          
          
          <code class="ruby">  #   regex === '/foo/baz/' #=&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="654">
          
          
          <code class="ruby">  #   regex === '/foz/baz/' #=&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="655">
          
          
          <code class="ruby">  # </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="656">
          
          
          <code class="ruby">  # @return Regexp</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="657">
          <span class="hits">1</span>
          
          <code class="ruby">  def to_r</code>
        </li>
      
        <li class="covered" data-hits="948" data-linenumber="658">
          <span class="hits">948</span>
          
          <code class="ruby">    classes = CHARACTER_CLASSES.map{|_,v| v[:class]+&quot;{0}\n&quot; }</code>
        </li>
      
        <li class="covered" data-hits="237" data-linenumber="659">
          <span class="hits">237</span>
          
          <code class="ruby">    bc = 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="660">
          
          
          <code class="ruby">    @regexp ||= Regexp.new(classes.join + '\A' + tokens.map{|part|</code>
        </li>
      
        <li class="covered" data-hits="169" data-linenumber="661">
          <span class="hits">169</span>
          
          <code class="ruby">      r = part.to_r_source(bc)</code>
        </li>
      
        <li class="covered" data-hits="169" data-linenumber="662">
          <span class="hits">169</span>
          
          <code class="ruby">      bc += part.size</code>
        </li>
      
        <li class="covered" data-hits="169" data-linenumber="663">
          <span class="hits">169</span>
          
          <code class="ruby">      r</code>
        </li>
      
        <li class="covered" data-hits="237" data-linenumber="664">
          <span class="hits">237</span>
          
          <code class="ruby">    }.join + '\z' , Regexp::EXTENDED)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="665">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="666">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="667">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="668">
          
          
          <code class="ruby">  # Extracts variables from a uri ( given as string ) or an instance of MatchData ( which was matched by the regexp of this template.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="669">
          
          
          <code class="ruby">  # The actual result depends on the value of post_processing.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="670">
          
          
          <code class="ruby">  # This argument specifies whether pair arrays should be converted to hashes.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="671">
          
          
          <code class="ruby">  # </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="672">
          
          
          <code class="ruby">  # @example Default Processing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="673">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('{var}').extract('value') #=&gt; {'var'=&gt;'value'}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="674">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('{&amp;args*}').extract('&amp;a=1&amp;b=2') #=&gt; {'args'=&gt;{'a'=&gt;'1','b'=&gt;'2'}}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="675">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('{&amp;arg,arg}').extract('&amp;arg=1&amp;arg=2') #=&gt; {'arg'=&gt;'2'}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="676">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="677">
          
          
          <code class="ruby">  # @example No Processing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="678">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('{var}').extract('value', URITemplate::Draft7::NO_PROCESSING) #=&gt; [['var','value']]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="679">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('{&amp;args*}').extract('&amp;a=1&amp;b=2', URITemplate::Draft7::NO_PROCESSING) #=&gt; [['args',[['a','1'],['b','2']]]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="680">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('{&amp;arg,arg}').extract('&amp;arg=1&amp;arg=2', URITemplate::Draft7::NO_PROCESSING) #=&gt; [['arg','1'],['arg','2']]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="681">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="682">
          
          
          <code class="ruby">  # @raise Encoding::InvalidByteSequenceError when the given uri was not properly encoded.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="683">
          
          
          <code class="ruby">  # @raise Encoding::UndefinedConversionError when the given uri could not be converted to utf-8.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="684">
          
          
          <code class="ruby">  # @raise Encoding::CompatibilityError when the given uri could not be converted to utf-8.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="685">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="686">
          
          
          <code class="ruby">  # @param [String,MatchData] Uri_or_MatchData A uri or a matchdata from which the variables should be extracted.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="687">
          
          
          <code class="ruby">  # @param [Array] Processing Specifies which processing should be done.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="688">
          
          
          <code class="ruby">  # </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="689">
          
          
          <code class="ruby">  # @note</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="690">
          
          
          <code class="ruby">  #   Don't expect that an extraction can fully recover the expanded variables. Extract rather generates a variable list which should expand to the uri from which it were extracted. In general the following equation should hold true:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="691">
          
          
          <code class="ruby">  #     a_tpl.expand( a_tpl.extract( an_uri ) ) == an_uri</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="692">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="693">
          
          
          <code class="ruby">  # @example Extraction cruces</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="694">
          
          
          <code class="ruby">  #   two_lists = URITemplate::Draft7.new('{listA*,listB*}')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="695">
          
          
          <code class="ruby">  #   uri = two_lists.expand('listA'=&gt;[1,2],'listB'=&gt;[3,4]) #=&gt; &quot;1,2,3,4&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="696">
          
          
          <code class="ruby">  #   variables = two_lists.extract( uri ) #=&gt; {'listA'=&gt;[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;],'listB'=&gt;nil}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="697">
          
          
          <code class="ruby">  #   # However, like said in the note:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="698">
          
          
          <code class="ruby">  #   two_lists.expand( variables ) == uri #=&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="699">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="700">
          
          
          <code class="ruby">  # @note</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="701">
          
          
          <code class="ruby">  #   The current implementation drops duplicated variables instead of checking them.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="702">
          
          
          <code class="ruby">  #   </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="703">
          
          
          <code class="ruby">  #   </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="704">
          <span class="hits">1</span>
          
          <code class="ruby">  def extract(uri_or_match, post_processing = DEFAULT_PROCESSING )</code>
        </li>
      
        <li class="covered" data-hits="234" data-linenumber="705">
          <span class="hits">234</span>
          
          <code class="ruby">    if uri_or_match.kind_of? String</code>
        </li>
      
        <li class="covered" data-hits="230" data-linenumber="706">
          <span class="hits">230</span>
          
          <code class="ruby">      m = self.to_r.match(uri_or_match)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="707">
          
          
          <code class="ruby">    elsif uri_or_match.kind_of?(MatchData)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="708">
          <span class="hits">3</span>
          
          <code class="ruby">      if uri_or_match.regexp != self.to_r</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="709">
          <span class="hits">2</span>
          
          <code class="ruby">        raise ArgumentError, &quot;Trying to extract variables from MatchData which was not generated by this template.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="710">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="711">
          <span class="hits">1</span>
          
          <code class="ruby">      m = uri_or_match</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="712">
          
          
          <code class="ruby">    elsif uri_or_match.nil?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="713">
          <span class="hits">1</span>
          
          <code class="ruby">      return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="714">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="715">
          
          
          <code class="ruby">      raise ArgumentError, &quot;Expected to receive a String or a MatchData, but got #{uri_or_match.inspect}.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="716">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="231" data-linenumber="717">
          <span class="hits">231</span>
          
          <code class="ruby">    if m.nil?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="718">
          
          
          <code class="ruby">      return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="719">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="230" data-linenumber="720">
          <span class="hits">230</span>
          
          <code class="ruby">      result = extract_matchdata(m)</code>
        </li>
      
        <li class="covered" data-hits="230" data-linenumber="721">
          <span class="hits">230</span>
          
          <code class="ruby">      if post_processing.include? :convert_values</code>
        </li>
      
        <li class="covered" data-hits="284" data-linenumber="722">
          <span class="hits">284</span>
          
          <code class="ruby">        result.map!{|k,v| [k, Utils.pair_array_to_hash(v)] }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="723">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="724">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="230" data-linenumber="725">
          <span class="hits">230</span>
          
          <code class="ruby">      if post_processing.include? :convert_result</code>
        </li>
      
        <li class="covered" data-hits="118" data-linenumber="726">
          <span class="hits">118</span>
          
          <code class="ruby">        result = Utils.pair_array_to_hash(result)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="727">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="728">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="230" data-linenumber="729">
          <span class="hits">230</span>
          
          <code class="ruby">      if block_given?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="730">
          <span class="hits">1</span>
          
          <code class="ruby">        return yield result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="731">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="732">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="229" data-linenumber="733">
          <span class="hits">229</span>
          
          <code class="ruby">      return result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="734">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="735">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="736">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="737">
          
          
          <code class="ruby">  # Extracts variables without any proccessing.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="738">
          
          
          <code class="ruby">  # This is equivalent to {#extract} with options {NO_PROCESSING}.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="739">
          
          
          <code class="ruby">  # @see #extract</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="740">
          <span class="hits">1</span>
          
          <code class="ruby">  def extract_simple(uri_or_match)</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="741">
          <span class="hits">109</span>
          
          <code class="ruby">    extract( uri_or_match, NO_PROCESSING )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="742">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="743">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="744">
          
          
          <code class="ruby">  # Returns the pattern for this template.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="745">
          <span class="hits">1</span>
          
          <code class="ruby">  def pattern</code>
        </li>
      
        <li class="covered" data-hits="353" data-linenumber="746">
          <span class="hits">353</span>
          
          <code class="ruby">    @pattern ||= tokens.map(&amp;:to_s).join</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="747">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="748">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="749">
          <span class="hits">1</span>
          
          <code class="ruby">  alias to_s pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="750">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="751">
          
          
          <code class="ruby">  # Compares two template patterns.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="752">
          <span class="hits">1</span>
          
          <code class="ruby">  def ==(tpl)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="753">
          <span class="hits">12</span>
          
          <code class="ruby">    return false if self.class != tpl.class</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="754">
          <span class="hits">12</span>
          
          <code class="ruby">    return self.pattern == tpl.pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="755">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="756">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="757">
          
          
          <code class="ruby">  # @method ===(uri)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="758">
          
          
          <code class="ruby">  # Alias for to_r.=== . Tests whether this template matches a given uri.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="759">
          
          
          <code class="ruby">  # @return TrueClass, FalseClass</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="760">
          <span class="hits">1</span>
          
          <code class="ruby">  def_delegators :to_r, :===</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="761">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="762">
          
          
          <code class="ruby">  # @method match(uri)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="763">
          
          
          <code class="ruby">  # Alias for to_r.match . Matches this template against the given uri.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="764">
          
          
          <code class="ruby">  # @yield MatchData</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="765">
          
          
          <code class="ruby">  # @return MatchData, Object </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="766">
          <span class="hits">1</span>
          
          <code class="ruby">  def_delegators :to_r, :match</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="767">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="768">
          
          
          <code class="ruby">  # The type of this template.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="769">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="770">
          
          
          <code class="ruby">  # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="771">
          
          
          <code class="ruby">  #   tpl1 = URITemplate::Draft7.new('/foo')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="772">
          
          
          <code class="ruby">  #   tpl2 = URITemplate.new( tpl1.pattern, tpl1.type )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="773">
          
          
          <code class="ruby">  #   tpl1 == tpl2 #=&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="774">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="775">
          
          
          <code class="ruby">  # @see {URITemplate#type}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="776">
          <span class="hits">1</span>
          
          <code class="ruby">  def type</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="777">
          <span class="hits">1</span>
          
          <code class="ruby">    :draft7</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="778">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="779">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="780">
          
          
          <code class="ruby">  # Returns the level of this template according to the draft ( http://tools.ietf.org/html/draft-gregorio-uritemplate-07#section-1.2 ). Higher level means higher complexity.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="781">
          
          
          <code class="ruby">  # Basically this is defined as:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="782">
          
          
          <code class="ruby">  # </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="783">
          
          
          <code class="ruby">  # * Level 1: no operators, one variable per expansion, no variable modifiers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="784">
          
          
          <code class="ruby">  # * Level 2: '+' and '#' operators, one variable per expansion, no variable modifiers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="785">
          
          
          <code class="ruby">  # * Level 3: all operators, multiple variables per expansion, no variable modifiers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="786">
          
          
          <code class="ruby">  # * Level 4: all operators, multiple variables per expansion, all variable modifiers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="787">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="788">
          
          
          <code class="ruby">  # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="789">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('/foo/').level #=&gt; 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="790">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('/foo{bar}').level #=&gt; 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="791">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('/foo{#bar}').level #=&gt; 2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="792">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('/foo{.bar}').level #=&gt; 3</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="793">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('/foo{bar,baz}').level #=&gt; 3</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="794">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('/foo{bar:20}').level #=&gt; 4</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="795">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('/foo{bar*}').level #=&gt; 4</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="796">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="797">
          
          
          <code class="ruby">  # Templates of lower levels might be convertible to other formats while templates of higher levels might be incompatible. Level 1 for example should be convertible to any other format since it just contains simple expansions.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="798">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="799">
          <span class="hits">1</span>
          
          <code class="ruby">  def level</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="800">
          <span class="hits">25</span>
          
          <code class="ruby">    tokens.map(&amp;:level).max</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="801">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="802">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="803">
          
          
          <code class="ruby">  # Tries to conatenate two templates, as if they were path segments.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="804">
          
          
          <code class="ruby">  # Removes double slashes or insert one if they are missing.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="805">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="806">
          
          
          <code class="ruby">  # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="807">
          
          
          <code class="ruby">  #   tpl = URITemplate::Draft7.new('/xy/')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="808">
          
          
          <code class="ruby">  #   (tpl / '/z/' ).pattern #=&gt; '/xy/z/'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="809">
          
          
          <code class="ruby">  #   (tpl / 'z/' ).pattern #=&gt; '/xy/z/'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="810">
          
          
          <code class="ruby">  #   (tpl / '{/z}' ).pattern #=&gt; '/xy{/z}'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="811">
          
          
          <code class="ruby">  #   (tpl / 'a' / 'b' ).pattern #=&gt; '/xy/a/b'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="812">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="813">
          <span class="hits">1</span>
          
          <code class="ruby">  def /(o)</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="814">
          <span class="hits">14</span>
          
          <code class="ruby">    other = self.class.convert(o)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="815">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="816">
          <span class="hits">14</span>
          
          <code class="ruby">    if other.absolute?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="817">
          <span class="hits">3</span>
          
          <code class="ruby">      raise ArgumentError, &quot;Expected to receive a relative template but got an absoulte one: #{other.inspect}. If you think this is a bug, please report it.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="818">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="819">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="820">
          <span class="hits">11</span>
          
          <code class="ruby">    if other.pattern == ''</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="821">
          <span class="hits">1</span>
          
          <code class="ruby">      return self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="822">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="823">
          
          
          <code class="ruby">    # Merge!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="824">
          
          
          <code class="ruby">    # Analyze the last token of this an the first token of the next and try to merge them</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="825">
          <span class="hits">10</span>
          
          <code class="ruby">    if self.tokens.last.kind_of?(Literal)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="826">
          <span class="hits">10</span>
          
          <code class="ruby">      if self.tokens.last.string[-1] == '/' # the last token ends with an /</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="827">
          <span class="hits">6</span>
          
          <code class="ruby">        if other.tokens.first.kind_of? Literal</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="828">
          
          
          <code class="ruby">          # both seems to be paths, merge them!</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="829">
          <span class="hits">4</span>
          
          <code class="ruby">          if other.tokens.first.string[0] == '/'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="830">
          
          
          <code class="ruby">            # strip one '/'</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="831">
          <span class="hits">2</span>
          
          <code class="ruby">            return self.class.new( self.tokens[0..-2] + [ Literal.new(self.tokens.last.string + other.tokens.first.string[1..-1]) ] + other.tokens[1..-1] )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="832">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="833">
          
          
          <code class="ruby">            # no problem, but we can merge them</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="834">
          <span class="hits">2</span>
          
          <code class="ruby">            return self.class.new( self.tokens[0..-2] + [ Literal.new(self.tokens.last.string + other.tokens.first.string) ] + other.tokens[1..-1] )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="835">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="836">
          
          
          <code class="ruby">        elsif other.tokens.first.kind_of? Expression::Path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="837">
          
          
          <code class="ruby">          # this will automatically insert '/'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="838">
          
          
          <code class="ruby">          # so we can strip one '/'</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="839">
          <span class="hits">2</span>
          
          <code class="ruby">          return self.class.new( self.tokens[0..-2] + [ Literal.new(self.tokens.last.string[0..-2]) ] + other.tokens )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="840">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="841">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="842">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="843">
          <span class="hits">4</span>
          
          <code class="ruby">    if other.tokens.first.kind_of?(Expression::Path) or (other.tokens.first.kind_of?(Literal) and other.tokens.first.string[0] == '/')</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="844">
          <span class="hits">1</span>
          
          <code class="ruby">      return self.class.new( self.tokens + other.tokens )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="845">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="846">
          <span class="hits">3</span>
          
          <code class="ruby">      return self.class.new( self.tokens + [Literal.new('/')] + other.tokens )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="847">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="848">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="849">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="850">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="851">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="852">
          
          
          <code class="ruby">  # should be relative:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="853">
          
          
          <code class="ruby">  #  xxx ...</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="854">
          
          
          <code class="ruby">  #  {xxx}x ...</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="855">
          
          
          <code class="ruby">  # </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="856">
          
          
          <code class="ruby">  #  should not be relative:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="857">
          
          
          <code class="ruby">  #  {proto}:// ...</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="858">
          
          
          <code class="ruby">  #  http:// ...</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="859">
          
          
          <code class="ruby">  #  http{ssl}:// ...</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="860">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="861">
          <span class="hits">1</span>
          
          <code class="ruby">  def absolute?</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="862">
          <span class="hits">14</span>
          
          <code class="ruby">    read_chars = &quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="863">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="864">
          <span class="hits">14</span>
          
          <code class="ruby">    tokens.each do |token|</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="865">
          <span class="hits">16</span>
          
          <code class="ruby">      if token.kind_of? Expression</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="866">
          <span class="hits">6</span>
          
          <code class="ruby">        if token.class::OPERATOR == ''</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="867">
          <span class="hits">3</span>
          
          <code class="ruby">          read_chars &lt;&lt; &quot;x&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="868">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="869">
          <span class="hits">3</span>
          
          <code class="ruby">          return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="870">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="871">
          
          
          <code class="ruby">      elsif token.kind_of? Literal</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="872">
          <span class="hits">10</span>
          
          <code class="ruby">        read_chars &lt;&lt; token.string</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="873">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="874">
          <span class="hits">13</span>
          
          <code class="ruby">      if read_chars =~ /^[a-z]+:\/\//i</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="875">
          <span class="hits">3</span>
          
          <code class="ruby">        return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="876">
          
          
          <code class="ruby">      elsif read_chars =~ /(?&lt;!:|\/)\/(?!\/)/</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="877">
          <span class="hits">3</span>
          
          <code class="ruby">        return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="878">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="879">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="880">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="881">
          <span class="hits">5</span>
          
          <code class="ruby">    return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="882">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="883">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="884">
          
          
          <code class="ruby">  # Returns the number of static characters in this template.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="885">
          
          
          <code class="ruby">  # This method is useful for routing, since it's often pointful to use the url with fewer variable characters.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="886">
          
          
          <code class="ruby">  # For example 'static' and 'sta{var}' both match 'static', but in most cases 'static' should be prefered over 'sta{var}' since it's more specific.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="887">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="888">
          
          
          <code class="ruby">  # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="889">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('/xy/').static_characters #=&gt; 4</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="890">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('{foo}').static_characters #=&gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="891">
          
          
          <code class="ruby">  #   URITemplate::Draft7.new('a{foo}b').static_characters #=&gt; 2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="892">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="893">
          
          
          <code class="ruby">  # @return Numeric</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="894">
          <span class="hits">1</span>
          
          <code class="ruby">  def static_characters</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="895">
          <span class="hits">11</span>
          
          <code class="ruby">    @static_characters ||= tokens.select{|t| t.kind_of?(Literal) }.map{|t| t.string.size }.inject(0,:+)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="896">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="897">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="898">
          <span class="hits">1</span>
          
          <code class="ruby">protected</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="899">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="900">
          <span class="hits">1</span>
          
          <code class="ruby">  def tokenize!</code>
        </li>
      
        <li class="covered" data-hits="310" data-linenumber="901">
          <span class="hits">310</span>
          
          <code class="ruby">    Tokenizer.new(pattern).to_a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="902">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="903">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="904">
          <span class="hits">1</span>
          
          <code class="ruby">  def tokens</code>
        </li>
      
        <li class="covered" data-hits="1013" data-linenumber="905">
          <span class="hits">1013</span>
          
          <code class="ruby">    @tokens ||= tokenize!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="906">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="907">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="908">
          
          
          <code class="ruby">  # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="909">
          <span class="hits">1</span>
          
          <code class="ruby">  def extract_matchdata(matchdata)</code>
        </li>
      
        <li class="covered" data-hits="230" data-linenumber="910">
          <span class="hits">230</span>
          
          <code class="ruby">    bc = 0</code>
        </li>
      
        <li class="covered" data-hits="230" data-linenumber="911">
          <span class="hits">230</span>
          
          <code class="ruby">    vars = []</code>
        </li>
      
        <li class="covered" data-hits="230" data-linenumber="912">
          <span class="hits">230</span>
          
          <code class="ruby">    tokens.each{|part|</code>
        </li>
      
        <li class="covered" data-hits="317" data-linenumber="913">
          <span class="hits">317</span>
          
          <code class="ruby">      i = 0</code>
        </li>
      
        <li class="covered" data-hits="317" data-linenumber="914">
          <span class="hits">317</span>
          
          <code class="ruby">      while i &lt; part.size</code>
        </li>
      
        <li class="covered" data-hits="325" data-linenumber="915">
          <span class="hits">325</span>
          
          <code class="ruby">        vars.push(*part.extract(i, matchdata[&quot;v#{bc}&quot;]))</code>
        </li>
      
        <li class="covered" data-hits="325" data-linenumber="916">
          <span class="hits">325</span>
          
          <code class="ruby">        bc += 1</code>
        </li>
      
        <li class="covered" data-hits="325" data-linenumber="917">
          <span class="hits">325</span>
          
          <code class="ruby">        i += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="918">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="919">
          
          
          <code class="ruby">    }</code>
        </li>
      
        <li class="covered" data-hits="230" data-linenumber="920">
          <span class="hits">230</span>
          
          <code class="ruby">    return vars</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="921">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="922">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="923">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="924">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="925">
          
          
          <code class="ruby"></code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="f8d256d1ef3e0fd588dc69c54499afd0f2cfe206">
  <div class="header">
    <h3>lib/uri_template/utils.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>30</b> relevant lines. 
      <span class="green"><b>30</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">#    This program is free software: you can redistribute it and/or modify</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">#    it under the terms of the Affero GNU General Public License as published by</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">#    the Free Software Foundation, either version 3 of the License, or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">#    (at your option) any later version.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">#    This program is distributed in the hope that it will be useful,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">#    GNU General Public License for more details.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">#    You should have received a copy of the GNU General Public License</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">#    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">#    (c) 2011 by Hannes Georg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">module URITemplate</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">  # This error will be raised whenever an object could not be converted to a param string.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">  class Unconvertable &lt; StandardError</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :object</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(object)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="26">
          <span class="hits">2</span>
          
          <code class="ruby">      @object = object</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="27">
          <span class="hits">2</span>
          
          <code class="ruby">      super(&quot;Could not convert the given object (#{Object.instance_method(:inspect).bind(@object).call() rescue '&lt;????&gt;'}) to a param since it doesn't respond to :to_param or :to_s.&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">  # A collection of some utility methods</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">  module Utils</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">    # @private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">    PCT = /%(\h\h)/.freeze</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">    # A regexp which match all non-simple characters.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">    NOT_SIMPLE_CHARS = /([^A-Za-z0-9\-\._])/.freeze</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">    # Encodes the given string into a pct-encoded string.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    # @param s The string to be encoded.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">    # @param m A regexp matching all characters, which need to be encoded.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">    #   URITemplate::Utils.pct(&quot;abc&quot;) #=&gt; &quot;abc&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">    #   URITemplate::Utils.pct(&quot;%&quot;) #=&gt; &quot;%25&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">    def pct(s, m=NOT_SIMPLE_CHARS)</code>
        </li>
      
        <li class="covered" data-hits="632" data-linenumber="50">
          <span class="hits">632</span>
          
          <code class="ruby">      s.to_s.encode('UTF-8').gsub(m){</code>
        </li>
      
        <li class="covered" data-hits="106" data-linenumber="51">
          <span class="hits">106</span>
          
          <code class="ruby">        '%'+$1.unpack('H2'*$1.bytesize).join('%').upcase</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      }.encode('ASCII')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">    # Decodes the given pct-encoded string into a utf-8 string.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">    # Should be the opposite of #pct.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">    #   URITemplate::Utils.dpct(&quot;abc&quot;) #=&gt; &quot;abc&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">    #   URITemplate::Utils.dpct(&quot;%25&quot;) #=&gt; &quot;%&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="62">
          <span class="hits">1</span>
          
          <code class="ruby">    def dpct(s)</code>
        </li>
      
        <li class="covered" data-hits="469" data-linenumber="63">
          <span class="hits">469</span>
          
          <code class="ruby">      s.to_s.encode('ASCII').gsub(PCT){</code>
        </li>
      
        <li class="covered" data-hits="104" data-linenumber="64">
          <span class="hits">104</span>
          
          <code class="ruby">        $1.to_i(16).chr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">      }.encode('UTF-8')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">    # Converts an object to a param value.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">    # Tries to call :to_param and then :to_s on that object.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">    # @raise Unconvertable if the object could not be converted.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">    #   URITemplate::Utils.object_to_param(5) #=&gt; &quot;5&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">    #   o = Object.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">    #   def o.to_param</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">    #     &quot;42&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">    #   URITemplate::Utils.object_to_param(o) #=&gt; &quot;42&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="78">
          <span class="hits">1</span>
          
          <code class="ruby">    def object_to_param(object)</code>
        </li>
      
        <li class="covered" data-hits="634" data-linenumber="79">
          <span class="hits">634</span>
          
          <code class="ruby">      if object.respond_to? :to_param</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="80">
          <span class="hits">1</span>
          
          <code class="ruby">        object.to_param</code>
        </li>
      
        <li class="covered" data-hits="632" data-linenumber="81">
          <span class="hits">632</span>
          
          <code class="ruby">      elsif object.respond_to? :to_s</code>
        </li>
      
        <li class="covered" data-hits="631" data-linenumber="82">
          <span class="hits">631</span>
          
          <code class="ruby">        object.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="84">
          <span class="hits">1</span>
          
          <code class="ruby">        raise Unconvertable.new(object) </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">    rescue NoMethodError</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="87">
          <span class="hits">1</span>
          
          <code class="ruby">      raise Unconvertable.new(object)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">    # Returns true when the given value is an array and it only consists of arrays with two items.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">    # This useful when using a hash is not ideal, since it doesn't allow duplicate keys.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">    #   URITemplate::Utils.pair_array?( Object.new ) #=&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">    #   URITemplate::Utils.pair_array?( [] ) #=&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">    #   URITemplate::Utils.pair_array?( [1,2,3] ) #=&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">    #   URITemplate::Utils.pair_array?( [ ['a',1],['b',2],['c',3] ] ) #=&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">    #   URITemplate::Utils.pair_array?( [ ['a',1],['b',2],['c',3],[] ] ) #=&gt; false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="99">
          <span class="hits">1</span>
          
          <code class="ruby">    def pair_array?(a)</code>
        </li>
      
        <li class="covered" data-hits="497" data-linenumber="100">
          <span class="hits">497</span>
          
          <code class="ruby">      return false unless a.kind_of? Array</code>
        </li>
      
        <li class="covered" data-hits="466" data-linenumber="101">
          <span class="hits">466</span>
          
          <code class="ruby">      return a.all?{|p| p.kind_of? Array and p.size == 2 }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">    # Turns the given value into a hash if it is an array of pairs.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">    # Otherwise it returns the value.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">    # You can test whether a value will be converted with {#pair_array?}.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">    #   URITemplate::Utils.pair_array_to_hash( 'x' ) #=&gt; 'x'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">    #   URITemplate::Utils.pair_array_to_hash( [ ['a',1],['b',2],['c',3] ] ) #=&gt; {'a'=&gt;1,'b'=&gt;2,'c'=&gt;3}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">    #   URITemplate::Utils.pair_array_to_hash( [ ['a',1],['a',2],['a',3] ] ) #=&gt; {'a'=&gt;3}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="111">
          <span class="hits">1</span>
          
          <code class="ruby">    def pair_array_to_hash(a)</code>
        </li>
      
        <li class="covered" data-hits="492" data-linenumber="112">
          <span class="hits">492</span>
          
          <code class="ruby">      if pair_array?(a)</code>
        </li>
      
        <li class="covered" data-hits="338" data-linenumber="113">
          <span class="hits">338</span>
          
          <code class="ruby">        return Hash[ *a.map{ |k,v| [k,pair_array_to_hash(v)] }.flatten(1) ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="359" data-linenumber="115">
          <span class="hits">359</span>
          
          <code class="ruby">        return a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="121">
          <span class="hits">1</span>
          
          <code class="ruby">    extend self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="910d6a583e8f439b42852c767f0a87e01f6f0e2a">
  <div class="header">
    <h3>spec/draft7_spec.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>95</b> relevant lines. 
      <span class="green"><b>95</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">#    This program is free software: you can redistribute it and/or modify</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">#    it under the terms of the Affero GNU General Public License as published by</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">#    the Free Software Foundation, either version 3 of the License, or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">#    (at your option) any later version.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">#    This program is distributed in the hope that it will be useful,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">#    GNU General Public License for more details.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">#    You should have received a copy of the GNU General Public License</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">#    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">#    (c) 2011 by Hannes Georg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">require 'uri_template'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">variables = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">  'dom' =&gt; &quot;example.com&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">  'dub' =&gt; &quot;me/too&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">  'hello' =&gt; &quot;Hello World!&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">  'half' =&gt; &quot;50%&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">  'var' =&gt; &quot;value&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">  'who' =&gt; &quot;fred&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">  'base' =&gt; &quot;http://example.com/home/&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">  'path' =&gt; &quot;/foo/bar&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">  'list' =&gt; [ &quot;red&quot;, &quot;green&quot;, &quot;blue&quot; ],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">  'keys' =&gt; { &quot;semi&quot; =&gt; &quot;;&quot; , &quot;dot&quot; =&gt; &quot;.&quot; , &quot;comma&quot; =&gt; &quot;,&quot;},</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">  'v' =&gt; &quot;6&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">  'x' =&gt; &quot;1024&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">  'y' =&gt; &quot;768&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">  'empty' =&gt; &quot;&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">  'empty_keys' =&gt; [],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">  'undef' =&gt; nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">  'host' =&gt; &quot;www.myhost.com&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">  'segments' =&gt; [&quot;path&quot;,&quot;to&quot;],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">  'file' =&gt; &quot;file&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">  'ext' =&gt; &quot;ext&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">  'args' =&gt; {&quot;a&quot;=&gt;&quot;b&quot;}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">expansion_results = {&quot;{var}&quot;=&gt;&quot;value&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby"> &quot;{hello}&quot;=&gt;&quot;Hello%20World%21&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"> &quot;{half}&quot;=&gt;&quot;50%25&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby"> &quot;O{empty}X&quot;=&gt;&quot;OX&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"> &quot;O{undef}X&quot;=&gt;&quot;OX&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"> &quot;{x,y}&quot;=&gt;&quot;1024,768&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby"> &quot;{x,hello,y}&quot;=&gt;&quot;1024,Hello%20World%21,768&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby"> &quot;?{x,empty}&quot;=&gt;&quot;?1024,&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby"> &quot;?{x,undef}&quot;=&gt;&quot;?1024&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby"> &quot;?{undef,y}&quot;=&gt;&quot;?768&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby"> &quot;{var:3}&quot;=&gt;&quot;val&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby"> &quot;{var:30}&quot;=&gt;&quot;value&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby"> &quot;{list}&quot;=&gt;&quot;red,green,blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby"> &quot;{list*}&quot;=&gt;&quot;red,green,blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby"> &quot;{keys}&quot;=&gt;&quot;semi,%3B,dot,.,comma,%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"> &quot;{keys*}&quot;=&gt;&quot;semi=%3B,dot=.,comma=%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby"> &quot;{+var}&quot;=&gt;&quot;value&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby"> &quot;{+hello}&quot;=&gt;&quot;Hello%20World!&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby"> &quot;{+half}&quot;=&gt;&quot;50%25&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby"> &quot;{base}index&quot;=&gt;&quot;http%3A%2F%2Fexample.com%2Fhome%2Findex&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"> &quot;{+base}index&quot;=&gt;&quot;http://example.com/home/index&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"> &quot;O{+empty}X&quot;=&gt;&quot;OX&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby"> &quot;O{+undef}X&quot;=&gt;&quot;OX&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby"> &quot;{+path}/here&quot;=&gt;&quot;/foo/bar/here&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby"> &quot;here?ref={+path}&quot;=&gt;&quot;here?ref=/foo/bar&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby"> &quot;up{+path}{var}/here&quot;=&gt;&quot;up/foo/barvalue/here&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby"> &quot;{+x,hello,y}&quot;=&gt;&quot;1024,Hello%20World!,768&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby"> &quot;{+path,x}/here&quot;=&gt;&quot;/foo/bar,1024/here&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby"> &quot;{+path:6}/here&quot;=&gt;&quot;/foo/b/here&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby"> &quot;{+list}&quot;=&gt;&quot;red,green,blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby"> &quot;{+list*}&quot;=&gt;&quot;red,green,blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby"> &quot;{+keys}&quot;=&gt;&quot;semi,;,dot,.,comma,,&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby"> &quot;{+keys*}&quot;=&gt;&quot;semi=;,dot=.,comma=,&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby"> &quot;{#var}&quot;=&gt;&quot;#value&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby"> &quot;{#hello}&quot;=&gt;&quot;#Hello%20World!&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby"> &quot;{#half}&quot;=&gt;&quot;#50%25&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby"> &quot;foo{#empty}&quot;=&gt;&quot;foo#&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby"> &quot;foo{#undef}&quot;=&gt;&quot;foo&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby"> &quot;{#x,hello,y}&quot;=&gt;&quot;#1024,Hello%20World!,768&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby"> &quot;{#path,x}/here&quot;=&gt;&quot;#/foo/bar,1024/here&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"> &quot;{#path:6}/here&quot;=&gt;&quot;#/foo/b/here&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby"> &quot;{#list}&quot;=&gt;&quot;#red,green,blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby"> &quot;{#list*}&quot;=&gt;&quot;#red,green,blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"> &quot;{#keys}&quot;=&gt;&quot;#semi,;,dot,.,comma,,&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby"> &quot;{#keys*}&quot;=&gt;&quot;#semi=;,dot=.,comma=,&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby"> &quot;{.who}&quot;=&gt;&quot;.fred&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby"> &quot;{.who,who}&quot;=&gt;&quot;.fred.fred&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby"> &quot;{.half,who}&quot;=&gt;&quot;.50%25.fred&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby"> &quot;www{.dom}&quot;=&gt;&quot;www.example.com&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby"> &quot;X{.var}&quot;=&gt;&quot;X.value&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby"> &quot;X{.empty}&quot;=&gt;&quot;X.&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby"> &quot;X{.undef}&quot;=&gt;&quot;X&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby"> &quot;X{.var:3}&quot;=&gt;&quot;X.val&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby"> &quot;X{.list}&quot;=&gt;&quot;X.red,green,blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby"> &quot;X{.list*}&quot;=&gt;&quot;X.red.green.blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby"> &quot;X{.keys}&quot;=&gt;&quot;X.semi,%3B,dot,.,comma,%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby"> &quot;X{.keys*}&quot;=&gt;&quot;X.semi=%3B.dot=..comma=%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby"> &quot;X{.empty_keys}&quot;=&gt;&quot;X&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby"> &quot;X{.empty_keys*}&quot;=&gt;&quot;X&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby"> &quot;{/who}&quot;=&gt;&quot;/fred&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby"> &quot;{/who,who}&quot;=&gt;&quot;/fred/fred&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby"> &quot;{/half,who}&quot;=&gt;&quot;/50%25/fred&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby"> &quot;{/who,dub}&quot;=&gt;&quot;/fred/me%2Ftoo&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby"> &quot;{/var}&quot;=&gt;&quot;/value&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby"> &quot;{/var,empty}&quot;=&gt;&quot;/value/&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby"> &quot;{/var,undef}&quot;=&gt;&quot;/value&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby"> &quot;{/var,x}/here&quot;=&gt;&quot;/value/1024/here&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby"> &quot;{/var:1,var}&quot;=&gt;&quot;/v/value&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby"> &quot;{/list}&quot;=&gt;&quot;/red,green,blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby"> &quot;{/list*}&quot;=&gt;&quot;/red/green/blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby"> &quot;{/list*,path:4}&quot;=&gt;&quot;/red/green/blue/%2Ffoo&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby"> &quot;{/keys}&quot;=&gt;&quot;/semi,%3B,dot,.,comma,%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby"> &quot;{/keys*}&quot;=&gt;&quot;/semi=%3B/dot=./comma=%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby"> &quot;{;who}&quot;=&gt;&quot;;who=fred&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby"> &quot;{;half}&quot;=&gt;&quot;;half=50%25&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby"> &quot;{;empty}&quot;=&gt;&quot;;empty&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby"> &quot;{;v,empty,who}&quot;=&gt;&quot;;v=6;empty;who=fred&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby"> &quot;{;v,bar,who}&quot;=&gt;&quot;;v=6;who=fred&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby"> &quot;{;x,y}&quot;=&gt;&quot;;x=1024;y=768&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby"> &quot;{;x,y,empty}&quot;=&gt;&quot;;x=1024;y=768;empty&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby"> &quot;{;x,y,undef}&quot;=&gt;&quot;;x=1024;y=768&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby"> &quot;{;hello:5}&quot;=&gt;&quot;;hello=Hello&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby"> &quot;{;list}&quot;=&gt;&quot;;list=red,green,blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby"> &quot;{;list*}&quot;=&gt;&quot;;red;green;blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby"> &quot;{;keys}&quot;=&gt;&quot;;keys=semi,%3B,dot,.,comma,%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby"> &quot;{;keys*}&quot;=&gt;&quot;;semi=%3B;dot=.;comma=%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby"> &quot;{?who}&quot;=&gt;&quot;?who=fred&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby"> &quot;{?half}&quot;=&gt;&quot;?half=50%25&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby"> &quot;{?x,y}&quot;=&gt;&quot;?x=1024&amp;y=768&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby"> &quot;{?x,y,empty}&quot;=&gt;&quot;?x=1024&amp;y=768&amp;empty=&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby"> &quot;{?x,y,undef}&quot;=&gt;&quot;?x=1024&amp;y=768&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby"> &quot;{?var:3}&quot;=&gt;&quot;?var=val&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby"> &quot;{?list}&quot;=&gt;&quot;?list=red,green,blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby"> &quot;{?list*}&quot;=&gt;&quot;?red&amp;green&amp;blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby"> &quot;{?keys}&quot;=&gt;&quot;?keys=semi,%3B,dot,.,comma,%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby"> &quot;{?keys*}&quot;=&gt;&quot;?semi=%3B&amp;dot=.&amp;comma=%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby"> &quot;{&amp;who}&quot;=&gt;&quot;&amp;who=fred&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby"> &quot;{&amp;half}&quot;=&gt;&quot;&amp;half=50%25&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby"> &quot;?fixed=yes{&amp;x}&quot;=&gt;&quot;?fixed=yes&amp;x=1024&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby"> &quot;{&amp;x,y,empty}&quot;=&gt;&quot;&amp;x=1024&amp;y=768&amp;empty=&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby"> &quot;{&amp;x,y,undef}&quot;=&gt;&quot;&amp;x=1024&amp;y=768&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby"> &quot;{&amp;var:3}&quot;=&gt;&quot;&amp;var=val&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby"> &quot;{&amp;list}&quot;=&gt;&quot;&amp;list=red,green,blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby"> &quot;{&amp;list*}&quot;=&gt;&quot;&amp;red&amp;green&amp;blue&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby"> &quot;{&amp;keys}&quot;=&gt;&quot;&amp;keys=semi,%3B,dot,.,comma,%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby"> &quot;{&amp;keys*}&quot;=&gt;&quot;&amp;semi=%3B&amp;dot=.&amp;comma=%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby"> </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby"> &quot;{&amp;list,keys*}&quot;=&gt;&quot;&amp;list=red,green,blue&amp;semi=%3B&amp;dot=.&amp;comma=%2C&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby"> </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby"> &quot;{&amp;hello}&quot; =&gt; &quot;&amp;hello=Hello%20World%21&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby"> </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby"> &quot;http://{+host}{/segments*}/{file}{.ext*}{?args*}&quot; =&gt; &quot;http://www.myhost.com/path/to/file.ext?a=b&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="158">
          <span class="hits">1</span>
          
          <code class="ruby">extraction_results = {&quot;{var}&quot;=&gt;[[&quot;var&quot;, &quot;value&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby"> &quot;{hello}&quot;=&gt;[[&quot;hello&quot;, &quot;Hello World!&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby"> &quot;{half}&quot;=&gt;[[&quot;half&quot;, &quot;50%&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby"> &quot;O{empty}X&quot;=&gt;[[&quot;empty&quot;, &quot;&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby"> &quot;O{undef}X&quot;=&gt;[[&quot;undef&quot;, &quot;&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby"> &quot;{x,y}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;y&quot;, &quot;768&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby"> &quot;{x,hello,y}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;hello&quot;, &quot;Hello World!&quot;], [&quot;y&quot;, &quot;768&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby"> &quot;?{x,empty}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;empty&quot;, &quot;&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby"> &quot;?{x,undef}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;undef&quot;, nil]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby"> &quot;?{undef,y}&quot;=&gt;[[&quot;undef&quot;, &quot;768&quot;], [&quot;y&quot;, nil]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby"> &quot;{var:3}&quot;=&gt;[[&quot;var&quot;, &quot;val&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby"> &quot;{var:30}&quot;=&gt;[[&quot;var&quot;, &quot;value&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby"> &quot;{list}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby"> &quot;{list*}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby"> &quot;{keys}&quot;=&gt;[[&quot;keys&quot;, [&quot;semi&quot;, &quot;;&quot;, &quot;dot&quot;, &quot;.&quot;, &quot;comma&quot;,&quot;,&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby"> &quot;{keys*}&quot;=&gt;[[&quot;keys&quot;, [[&quot;semi&quot;, &quot;;&quot;], [&quot;dot&quot;, &quot;.&quot;], [&quot;comma&quot;, &quot;,&quot;]]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby"> &quot;{+var}&quot;=&gt;[[&quot;var&quot;, &quot;value&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby"> &quot;{+hello}&quot;=&gt;[[&quot;hello&quot;, &quot;Hello World!&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby"> &quot;{+half}&quot;=&gt;[[&quot;half&quot;, &quot;50%&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby"> &quot;{base}index&quot;=&gt;[[&quot;base&quot;, &quot;http://example.com/home/&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby"> &quot;{+base}index&quot;=&gt;[[&quot;base&quot;, &quot;http://example.com/home/&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby"> &quot;O{+empty}X&quot;=&gt;[[&quot;empty&quot;, &quot;&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby"> &quot;O{+undef}X&quot;=&gt;[[&quot;undef&quot;, &quot;&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby"> &quot;{+path}/here&quot;=&gt;[[&quot;path&quot;, &quot;/foo/bar&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby"> &quot;here?ref={+path}&quot;=&gt;[[&quot;path&quot;, &quot;/foo/bar&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby"> &quot;up{+path}{var}/here&quot;=&gt;[[&quot;path&quot;, &quot;/foo/&quot;], [&quot;var&quot;, &quot;barvalue&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby"> &quot;{+x,hello,y}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;hello&quot;, &quot;Hello World!&quot;], [&quot;y&quot;, &quot;768&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby"> &quot;{+path,x}/here&quot;=&gt;[[&quot;path&quot;, &quot;/foo/bar&quot;], [&quot;x&quot;, &quot;1024&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby"> &quot;{+path:6}/here&quot;=&gt;[[&quot;path&quot;, &quot;/foo/b&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby"> &quot;{+list}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby"> &quot;{+list*}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby"> &quot;{+keys}&quot;=&gt;[[&quot;keys&quot;, [&quot;semi&quot;, &quot;;&quot;, &quot;dot&quot;, &quot;.&quot;, &quot;comma&quot;,&quot;,&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby"> &quot;{+keys*}&quot;=&gt;[[&quot;keys&quot;, [[&quot;semi&quot;,&quot;;&quot;],[&quot;dot&quot;,&quot;.&quot;], [&quot;comma&quot;,&quot;,&quot;]]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby"> &quot;{#var}&quot;=&gt;[[&quot;var&quot;, &quot;value&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby"> &quot;{#hello}&quot;=&gt;[[&quot;hello&quot;, &quot;Hello World!&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby"> &quot;{#half}&quot;=&gt;[[&quot;half&quot;, &quot;50%&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby"> &quot;foo{#empty}&quot;=&gt;[[&quot;empty&quot;, &quot;&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby"> &quot;foo{#undef}&quot;=&gt;[[&quot;undef&quot;, nil]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby"> &quot;{#x,hello,y}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;hello&quot;, &quot;Hello World!&quot;], [&quot;y&quot;, &quot;768&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby"> &quot;{#path,x}/here&quot;=&gt;[[&quot;path&quot;, &quot;/foo/bar&quot;], [&quot;x&quot;, &quot;1024&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby"> &quot;{#path:6}/here&quot;=&gt;[[&quot;path&quot;, &quot;/foo/b&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby"> &quot;{#list}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby"> &quot;{#list*}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby"> &quot;{#keys}&quot;=&gt;[[&quot;keys&quot;, [&quot;semi&quot;, &quot;;&quot;, &quot;dot&quot;, &quot;.&quot;, &quot;comma&quot;,&quot;,&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby"> &quot;{#keys*}&quot;=&gt;[[&quot;keys&quot;, [[&quot;semi&quot;,&quot;;&quot;], [&quot;dot&quot;, &quot;.&quot;], [&quot;comma&quot;,&quot;,&quot;]]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby"> &quot;{.who}&quot;=&gt;[[&quot;who&quot;, &quot;fred&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby"> &quot;{.who,who}&quot;=&gt;[[&quot;who&quot;, &quot;fred&quot;], [&quot;who&quot;, &quot;fred&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby"> &quot;{.half,who}&quot;=&gt;[[&quot;half&quot;, &quot;50%&quot;], [&quot;who&quot;, &quot;fred&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby"> &quot;www{.dom}&quot;=&gt;[[&quot;dom&quot;, &quot;example.com&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby"> &quot;X{.var}&quot;=&gt;[[&quot;var&quot;, &quot;value&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby"> &quot;X{.empty}&quot;=&gt;[[&quot;empty&quot;, &quot;&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby"> &quot;X{.undef}&quot;=&gt;[[&quot;undef&quot;, nil]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby"> &quot;X{.var:3}&quot;=&gt;[[&quot;var&quot;, &quot;val&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby"> &quot;X{.list}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby"> &quot;X{.list*}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby"> &quot;X{.keys}&quot;=&gt;[[&quot;keys&quot;, [&quot;semi&quot;, &quot;;&quot;, &quot;dot&quot;, &quot;.&quot;, &quot;comma&quot;,&quot;,&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby"> &quot;X{.keys*}&quot;=&gt;[[&quot;keys&quot;, [[&quot;semi&quot;, &quot;;&quot;], [&quot;dot&quot;, &quot;.&quot;], [&quot;comma&quot;, &quot;,&quot;]]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby"> &quot;X{.empty_keys}&quot;=&gt;[[&quot;empty_keys&quot;, nil]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby"> &quot;X{.empty_keys*}&quot;=&gt;[[&quot;empty_keys&quot;, nil]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby"> &quot;{/who}&quot;=&gt;[[&quot;who&quot;, &quot;fred&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby"> &quot;{/who,who}&quot;=&gt;[[&quot;who&quot;, &quot;fred&quot;], [&quot;who&quot;, &quot;fred&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby"> &quot;{/half,who}&quot;=&gt;[[&quot;half&quot;, &quot;50%&quot;], [&quot;who&quot;, &quot;fred&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby"> &quot;{/who,dub}&quot;=&gt;[[&quot;who&quot;, &quot;fred&quot;], [&quot;dub&quot;, &quot;me/too&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby"> &quot;{/var}&quot;=&gt;[[&quot;var&quot;, &quot;value&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby"> &quot;{/var,empty}&quot;=&gt;[[&quot;var&quot;, &quot;value&quot;], [&quot;empty&quot;, &quot;&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby"> &quot;{/var,undef}&quot;=&gt;[[&quot;var&quot;, &quot;value&quot;], [&quot;undef&quot;, nil]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby"> &quot;{/var,x}/here&quot;=&gt;[[&quot;var&quot;, &quot;value&quot;], [&quot;x&quot;, &quot;1024&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby"> &quot;{/var:1,var}&quot;=&gt;[[&quot;var&quot;, &quot;v&quot;], [&quot;var&quot;, &quot;value&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby"> &quot;{/list}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby"> &quot;{/list*}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby"> &quot;{/list*,path:4}&quot;=&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">  [[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;/foo&quot;]], [&quot;path&quot;, nil]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby"> &quot;{/keys}&quot;=&gt;[[&quot;keys&quot;, [&quot;semi&quot;, &quot;;&quot;, &quot;dot&quot;, &quot;.&quot;, &quot;comma&quot;,&quot;,&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby"> &quot;{/keys*}&quot;=&gt;[[&quot;keys&quot;, [[&quot;semi&quot;, &quot;;&quot;], [&quot;dot&quot;, &quot;.&quot;], [&quot;comma&quot;, &quot;,&quot;]]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby"> &quot;{;who}&quot;=&gt;[[&quot;who&quot;, &quot;fred&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby"> &quot;{;half}&quot;=&gt;[[&quot;half&quot;, &quot;50%&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby"> &quot;{;empty}&quot;=&gt;[[&quot;empty&quot;, &quot;&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby"> &quot;{;v,empty,who}&quot;=&gt;[[&quot;v&quot;, &quot;6&quot;], [&quot;empty&quot;, &quot;&quot;], [&quot;who&quot;, &quot;fred&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby"> &quot;{;v,bar,who}&quot;=&gt;[[&quot;v&quot;, &quot;6&quot;], [&quot;bar&quot;, nil], [&quot;who&quot;, &quot;fred&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby"> &quot;{;x,y}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;y&quot;, &quot;768&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby"> &quot;{;x,y,empty}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;y&quot;, &quot;768&quot;], [&quot;empty&quot;, &quot;&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby"> &quot;{;x,y,undef}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;y&quot;, &quot;768&quot;], [&quot;undef&quot;, nil]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby"> &quot;{;hello:5}&quot;=&gt;[[&quot;hello&quot;, &quot;Hello&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby"> &quot;{;list}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby"> &quot;{;list*}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby"> &quot;{;keys}&quot;=&gt;[[&quot;keys&quot;, [&quot;semi&quot;, &quot;;&quot;, &quot;dot&quot;, &quot;.&quot;, &quot;comma&quot;,&quot;,&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby"> &quot;{;keys*}&quot;=&gt;[[&quot;keys&quot;, [[&quot;semi&quot;, &quot;;&quot;], [&quot;dot&quot;, &quot;.&quot;], [&quot;comma&quot;, &quot;,&quot;]]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby"> &quot;{?who}&quot;=&gt;[[&quot;who&quot;, &quot;fred&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby"> &quot;{?half}&quot;=&gt;[[&quot;half&quot;, &quot;50%&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby"> &quot;{?x,y}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;y&quot;, &quot;768&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby"> &quot;{?x,y,empty}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;y&quot;, &quot;768&quot;], [&quot;empty&quot;, &quot;&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby"> &quot;{?x,y,undef}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;y&quot;, &quot;768&quot;], [&quot;undef&quot;, nil]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby"> &quot;{?var:3}&quot;=&gt;[[&quot;var&quot;, &quot;val&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby"> &quot;{?list}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby"> &quot;{?list*}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby"> &quot;{?keys}&quot;=&gt;[[&quot;keys&quot;, [&quot;semi&quot;, &quot;;&quot;, &quot;dot&quot;, &quot;.&quot;, &quot;comma&quot;,&quot;,&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby"> &quot;{?keys*}&quot;=&gt;[[&quot;keys&quot;, [[&quot;semi&quot;, &quot;;&quot;], [&quot;dot&quot;, &quot;.&quot;], [&quot;comma&quot;, &quot;,&quot;]]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby"> &quot;{&amp;who}&quot;=&gt;[[&quot;who&quot;, &quot;fred&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby"> &quot;{&amp;half}&quot;=&gt;[[&quot;half&quot;, &quot;50%&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby"> &quot;?fixed=yes{&amp;x}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby"> &quot;{&amp;x,y,empty}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;y&quot;, &quot;768&quot;], [&quot;empty&quot;, &quot;&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby"> &quot;{&amp;x,y,undef}&quot;=&gt;[[&quot;x&quot;, &quot;1024&quot;], [&quot;y&quot;, &quot;768&quot;], [&quot;undef&quot;, nil]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby"> &quot;{&amp;var:3}&quot;=&gt;[[&quot;var&quot;, &quot;val&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby"> &quot;{&amp;list}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby"> &quot;{&amp;list*}&quot;=&gt;[[&quot;list&quot;, [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby"> &quot;{&amp;keys}&quot;=&gt;[[&quot;keys&quot;, [&quot;semi&quot;, &quot;;&quot;, &quot;dot&quot;, &quot;.&quot;, &quot;comma&quot;,&quot;,&quot;]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby"> &quot;{&amp;keys*}&quot;=&gt;[[&quot;keys&quot;, [[&quot;semi&quot;, &quot;;&quot;], [&quot;dot&quot;, &quot;.&quot;], [&quot;comma&quot;, &quot;,&quot;]]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby"> </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby"> &quot;{&amp;hello}&quot; =&gt; [[&quot;hello&quot;,&quot;Hello World!&quot;]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby"> </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby"> &quot;{&amp;list,keys*}&quot;=&gt;[[&quot;list&quot;,[&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;]],[&quot;keys&quot;, [[&quot;semi&quot;, &quot;;&quot;], [&quot;dot&quot;, &quot;.&quot;], [&quot;comma&quot;, &quot;,&quot;]]]],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby"> </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby"> &quot;http://{+host}{/segments*}/{file}{.ext*}{?args*}&quot; =&gt; [ ['host','www.myhost.com'],['segments',['path','to']],['file','file'],['ext',['ext']],['args',[['a','b']]]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="271">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="273">
          <span class="hits">1</span>
          
          <code class="ruby">expansion_levels = {&quot;{var}&quot;=&gt;1,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="274">
          
          
          <code class="ruby"> &quot;O{empty}X&quot;=&gt;1,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby"> &quot;{x,y}&quot;=&gt;3,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby"> &quot;{var:3}&quot;=&gt;4,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby"> &quot;{list*}&quot;=&gt;4,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby"> &quot;{+var}&quot;=&gt;2,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby"> &quot;{+x,hello,y}&quot;=&gt;3,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby"> &quot;{+path:6}/here&quot;=&gt;4,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby"> &quot;{+list*}&quot;=&gt;4,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby"> &quot;{#var}&quot;=&gt;2,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby"> &quot;{#x,hello,y}&quot;=&gt;3,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="284">
          
          
          <code class="ruby"> &quot;{#path:6}/here&quot;=&gt;4,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby"> &quot;{#list*}&quot;=&gt;4,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby"> &quot;{.who}&quot;=&gt;3,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby"> &quot;{.who,who}&quot;=&gt;3,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby"> &quot;X{.list*}&quot;=&gt;4,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="289">
          
          
          <code class="ruby"> &quot;{/who}&quot;=&gt;3,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby"> &quot;{/who,who}&quot;=&gt;3</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="291">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="292">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="293">
          <span class="hits">1</span>
          
          <code class="ruby">describe URITemplate::Draft7 do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="295">
          <span class="hits">1</span>
          
          <code class="ruby">  describe &quot;levels&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="296">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="297">
          <span class="hits">1</span>
          
          <code class="ruby">  expansion_levels.each{|pattern, exp|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="299">
          <span class="hits">18</span>
          
          <code class="ruby">    it &quot;should expand #{pattern.inspect} to #{exp.inspect}&quot; do</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="300">
          <span class="hits">18</span>
          
          <code class="ruby">      p = URITemplate::Draft7.new(pattern)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="301">
          <span class="hits">18</span>
          
          <code class="ruby">      p.level.should == exp</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="305">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="308">
          <span class="hits">1</span>
          
          <code class="ruby">  describe &quot;basic expansion&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="310">
          <span class="hits">1</span>
          
          <code class="ruby">  expansion_results.each{|pattern, exp|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="312">
          <span class="hits">109</span>
          
          <code class="ruby">    it &quot;should expand #{pattern.inspect} to #{exp.inspect}&quot; do</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="313">
          <span class="hits">109</span>
          
          <code class="ruby">      p = URITemplate::Draft7.new(pattern)</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="314">
          <span class="hits">109</span>
          
          <code class="ruby">      URITemplate::Draft7.valid?(pattern).should == true</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="315">
          <span class="hits">109</span>
          
          <code class="ruby">      s = p.expand(variables)</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="316">
          <span class="hits">109</span>
          
          <code class="ruby">      s.should == exp</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="320">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="323">
          <span class="hits">1</span>
          
          <code class="ruby">  describe &quot;basic extraction&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="324">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="325">
          <span class="hits">1</span>
          
          <code class="ruby">  extraction_results.each{|pattern, exp|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="327">
          <span class="hits">109</span>
          
          <code class="ruby">    it &quot;should extract #{pattern.inspect} from #{expansion_results[pattern].inspect}&quot; do</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="328">
          <span class="hits">109</span>
          
          <code class="ruby">      p = URITemplate::Draft7.new(pattern)</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="329">
          <span class="hits">109</span>
          
          <code class="ruby">      v = p.extract_simple(expansion_results[pattern])</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="330">
          <span class="hits">109</span>
          
          <code class="ruby">      v.should_not be_nil</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="331">
          <span class="hits">109</span>
          
          <code class="ruby">      v.should == exp</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="333">
          
          
          <code class="ruby">      # make some easy transformations</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="334">
          <span class="hits">109</span>
          
          <code class="ruby">      tv = p.extract(expansion_results[pattern])</code>
        </li>
      
        <li class="covered" data-hits="109" data-linenumber="335">
          <span class="hits">109</span>
          
          <code class="ruby">      p.expand(tv).should == expansion_results[pattern]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="337">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="338">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="339">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="342">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="343">
          <span class="hits">1</span>
          
          <code class="ruby">  describe &quot;edge-cases&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="345">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should work with empty strings&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="346">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="347">
          <span class="hits">1</span>
          
          <code class="ruby">      p = URITemplate::Draft7.new('')</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="348">
          <span class="hits">1</span>
          
          <code class="ruby">      p.should === ''</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="349">
          <span class="hits">1</span>
          
          <code class="ruby">      p.should_not === 'x'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="350">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="351">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="353">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should raise on no template&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="354">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="355">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ URITemplate::Draft7.new() }.should raise_error(ArgumentError)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="359">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should raise on random object&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="360">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="361">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ URITemplate::Draft7.new(Object.new) }.should raise_error(ArgumentError)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="362">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="363">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="364">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="365">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should raise on foreign match data extraction&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="366">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="367">
          <span class="hits">1</span>
          
          <code class="ruby">      tpl = URITemplate::Draft7.new('tpl')</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="368">
          <span class="hits">1</span>
          
          <code class="ruby">      md = /something else/.match('something else')</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="369">
          <span class="hits">1</span>
          
          <code class="ruby">      md.should_not be_nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="370">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="371">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ tpl.extract(md) }.should raise_error(ArgumentError)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="372">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="373">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="374">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="375">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should pass nil thru extraction&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="376">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="377">
          <span class="hits">1</span>
          
          <code class="ruby">      tpl = URITemplate::Draft7.new('tpl')</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="378">
          <span class="hits">1</span>
          
          <code class="ruby">      tpl.extract(nil).should be_nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="380">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="381">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="382">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should extract from matchdata&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="383">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="384">
          <span class="hits">1</span>
          
          <code class="ruby">      tpl = URITemplate::Draft7.new('{var}')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="385">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="386">
          <span class="hits">1</span>
          
          <code class="ruby">      tpl.extract( tpl.match('value') ).should == {'var'=&gt;'value'}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="388">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="389">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="390">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should raise when extracting from foreign matchdata&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="391">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="392">
          <span class="hits">1</span>
          
          <code class="ruby">      tpl = URITemplate::Draft7.new('{var}')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="393">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="394">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ tpl.extract( /.*/.match('value') ) }.should raise_error(ArgumentError)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="395">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="396">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="397">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="398">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should not extract newlines&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="399">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="400">
          <span class="hits">1</span>
          
          <code class="ruby">      tpl = URITemplate::Draft7.new('{x}')</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="401">
          <span class="hits">1</span>
          
          <code class="ruby">      tpl.extract(&quot;\n&quot;).should be_nil</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="402">
          <span class="hits">1</span>
          
          <code class="ruby">      tpl.extract(&quot;%0A&quot;).should == {'x'=&gt;&quot;\n&quot;}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="403">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="404">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="405">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="406">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should accept pct-variablenames&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="408">
          <span class="hits">1</span>
          
          <code class="ruby">      tpl = URITemplate::Draft7.new('{?vars*}')</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="409">
          <span class="hits">1</span>
          
          <code class="ruby">      tpl.extract(&quot;?v%0Aa=x&quot;).should == {'vars'=&gt;{'v%0Aa'=&gt;&quot;x&quot;}}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="410">
          <span class="hits">1</span>
          
          <code class="ruby">      tpl.extract(&quot;?v%0Aa&amp;b=c&quot;).should == {'vars'=&gt;{'v%0Aa'=&gt;nil,'b'=&gt;'c'}}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="411">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="412">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="413">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="414">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="415">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="416">
          <span class="hits">1</span>
          
          <code class="ruby">  describe &quot;bogus templates&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="417">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="418">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should raise on open expansions&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="419">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="420">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ URITemplate::Draft7.new('bogus{var') }.should raise_error(URITemplate::Invalid)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="421">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ URITemplate::Draft7.new('bogus}var') }.should raise_error(URITemplate::Invalid)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="422">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="423">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="424">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="425">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should raise on non-uri characters&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="426">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="427">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ URITemplate::Draft7.new(&quot;\n&quot;) }.should raise_error(URITemplate::Invalid)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="428">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ URITemplate::Draft7.new(&quot; &quot;) }.should raise_error(URITemplate::Invalid)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="429">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ URITemplate::Draft7.new(&quot;\r&quot;) }.should raise_error(URITemplate::Invalid)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="430">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="432">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="433">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="434">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="435">
          <span class="hits">1</span>
          
          <code class="ruby">  describe &quot;general usage&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="436">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="437">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should parse variable names correctly&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="438">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="439">
          <span class="hits">1</span>
          
          <code class="ruby">      p = URITemplate::Draft7.new('{a,b,c}{x,y}{c,a,b}{b,c,a}')</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="440">
          <span class="hits">1</span>
          
          <code class="ruby">      p.variables.should == ['x','y','b','c','a']</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="441">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="442">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="443">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="444">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should yield on extract correctly&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="445">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="446">
          <span class="hits">1</span>
          
          <code class="ruby">      p = URITemplate::Draft7.new('/foo/{bar}')</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="447">
          <span class="hits">1</span>
          
          <code class="ruby">      fn = mock()</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="448">
          <span class="hits">1</span>
          
          <code class="ruby">      fn.should_receive(:call).once</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="449">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="450">
          <span class="hits">1</span>
          
          <code class="ruby">      p.extract('/foo/baz'){|a|</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="451">
          <span class="hits">1</span>
          
          <code class="ruby">        fn.call(a)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="452">
          <span class="hits">1</span>
          
          <code class="ruby">        a.should == {'bar'=&gt;'baz'}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="453">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="454">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="455">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="456">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="457">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="458">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="459">
          <span class="hits">1</span>
          
          <code class="ruby">  describe &quot;path concatenation&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="460">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="461">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should insert slashes when needed&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="462">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="463">
          <span class="hits">1</span>
          
          <code class="ruby">      p = URITemplate::Draft7.new('/foo/bar')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="464">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="465">
          <span class="hits">1</span>
          
          <code class="ruby">      (p / 'baz').should == URITemplate::Draft7.new('/foo/bar/baz')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="466">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="467">
          <span class="hits">1</span>
          
          <code class="ruby">      (p / '{baz}').should == URITemplate::Draft7.new('/foo/bar/{baz}')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="468">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="469">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="470">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="471">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should not insert slashes when they aren't needed&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="472">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="473">
          <span class="hits">1</span>
          
          <code class="ruby">      p = URITemplate::Draft7.new('/foo/bar')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="475">
          <span class="hits">1</span>
          
          <code class="ruby">      (p / '').should == URITemplate::Draft7.new('/foo/bar')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="476">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="477">
          <span class="hits">1</span>
          
          <code class="ruby">      (p / '{/baz}').should == URITemplate::Draft7.new('/foo/bar{/baz}')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="478">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="479">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="480">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="481">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should strip slashes when they would double&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="482">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="483">
          <span class="hits">1</span>
          
          <code class="ruby">      p = URITemplate::Draft7.new('/foo/bar/')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="484">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="485">
          <span class="hits">1</span>
          
          <code class="ruby">      (p / '/baz').should == URITemplate::Draft7.new('/foo/bar/baz')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="486">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="487">
          <span class="hits">1</span>
          
          <code class="ruby">      (p / '{/baz}').should == URITemplate::Draft7.new('/foo/bar{/baz}')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="488">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="489">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="490">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="491">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should raise on absolute templates&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="492">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="493">
          <span class="hits">1</span>
          
          <code class="ruby">      p = URITemplate::Draft7.new('/foo/bar/')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="494">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="495">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ p / 'http://' }.should raise_error</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="496">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="497">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ p / '{proto}://' }.should raise_error</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="498">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="499">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ p / 'http{secure}://' }.should raise_error</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="500">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="501">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="502">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="503">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="504">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="505">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="506">
          
          
          <code class="ruby"></code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="5df27f43cdf5ed62c4a0aa01f7e40b401889b6c4">
  <div class="header">
    <h3>spec/uri_template_spec.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>29</b> relevant lines. 
      <span class="green"><b>29</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">#    This program is free software: you can redistribute it and/or modify</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">#    it under the terms of the Affero GNU General Public License as published by</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">#    the Free Software Foundation, either version 3 of the License, or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">#    (at your option) any later version.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">#    This program is distributed in the hope that it will be useful,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">#    GNU General Public License for more details.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">#    You should have received a copy of the GNU General Public License</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">#    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">#    (c) 2011 by Hannes Georg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">require 'uri_template'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">describe URITemplate do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">  describe 'resolving' do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">    it 'should create templates' do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">      URITemplate.new('{x}').should == URITemplate::Draft7.new('{x}')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">    it 'should be able to select a template version' do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">      URITemplate.new(:draft7,'{x}').should == URITemplate::Draft7.new('{x}')</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">      URITemplate.new('{x}',:draft7).should == URITemplate::Draft7.new('{x}')</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">    it 'should raise when given an invalid version' do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="40">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ URITemplate.new(:foo,'{x}') }.should raise_error(ArgumentError)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">  describe &quot;docs&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">    gem 'yard'</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">    require 'yard'</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="51">
          <span class="hits">1</span>
          
          <code class="ruby">    YARD.parse('lib/**/*.rb').inspect</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">    YARD::Registry.each do |object|</code>
        </li>
      
        <li class="covered" data-hits="137" data-linenumber="54">
          <span class="hits">137</span>
          
          <code class="ruby">      if object.has_tag?('example')</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="55">
          <span class="hits">17</span>
          
          <code class="ruby">        object.tags('example').each_with_index do |tag, i|</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="56">
          <span class="hits">20</span>
          
          <code class="ruby">          code = tag.text.gsub(/(.*)\s*#=&gt;(.*)(\n|$)/){</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="57">
          <span class="hits">56</span>
          
          <code class="ruby">            &quot;(#{$1}).should == #{$2}\n&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">          }</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="59">
          <span class="hits">20</span>
          
          <code class="ruby">          it &quot;#{object.to_s} in #{object.file}:#{object.line} should have valid example #{(i+1).to_s}&quot; do</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="60">
          <span class="hits">40</span>
          
          <code class="ruby">            lambda{ eval code }.should_not raise_error</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">  describe &quot;utils&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should raise on basic object&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="72">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ URITemplate::Utils.object_to_param(BasicObject.new) }.should raise_error(URITemplate::Unconvertable)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="76">
          <span class="hits">1</span>
          
          <code class="ruby">    it &quot;should raise when an object is not convertable to string&quot; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="78">
          <span class="hits">1</span>
          
          <code class="ruby">      obj = Object.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="80">
          <span class="hits">1</span>
          
          <code class="ruby">      class &lt;&lt; obj</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="82">
          <span class="hits">1</span>
          
          <code class="ruby">        undef to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="86">
          <span class="hits">2</span>
          
          <code class="ruby">      lambda{ URITemplate::Utils.object_to_param(obj) }.should raise_error(URITemplate::Unconvertable)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
      </div>
    </div>
  </body>
</html>
