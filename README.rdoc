= URITemplate - a uri template library

With URITemplate you can generate URI based on simple templates. The current implementation is based on draft 7 of the uri template spec ( http://tools.ietf.org/html/draft-gregorio-uritemplate-07 ). For the syntax read that spec. Draft 2 of that specification is implemented as addressable gem.

It's currently planed to add newer versions of that spec when they emerge. Therefore the module URITemplate just defines one abstract method ( expand ) and some methods to access the actual implementations.

Some implementations might be able to extract variables, too ( Draft 7 is! ).

== Examples

  require 'uri_template'
  
  tpl = URITemplate.new('http://{host}{/segments*}/{file}{.extensions*}')
  
  # This will give: http://www.host.com/path/to/a/file.x.y
  tpl.expand('host'=>'www.host.com','segments'=>['path','to','a'],'file'=>'file','extensions'=>['x','y'])
  
  # This will give: { 'host'=>'www.host.com','segments'=>['path','to','a'],'file'=>'file','extensions'=>['x','y']}
  tpl.extract('http://www.host.com/path/to/a/file.x.y')
  
  
== Benchmarks

System: Core 2 Duo T9600, 4 gb ram, Fedora 15 64 bit, 10_000 repetitions
Implementation: Draft7
Results marked with * means that the template object is reused.

=== Expansion
    "" vs "" => ""
          user     system      total        real
    Addressable  0.070000   0.010000   0.080000 (  0.081990)
    UriTemplate   0.010000   0.000000   0.010000 (  0.007668)
    Addressable*  0.090000   0.000000   0.090000 (  0.090763)
    UriTemplate*  0.000000   0.000000   0.000000 (  0.001633)
    
    "{simple_string}" vs "{simple_string}" => "noneedtoescape"
          user     system      total        real
    Addressable  0.560000   0.000000   0.560000 (  0.560811)
    UriTemplate   0.030000   0.000000   0.030000 (  0.034104)
    Addressable*  0.560000   0.000000   0.560000 (  0.558118)
    UriTemplate*  0.030000   0.000000   0.030000 (  0.026850)
    
    "{escaped_string}" vs "{escaped_string}" => "%2F%20%2F%25%2F%20%3F%2B"
          user     system      total        real
    Addressable  0.560000   0.000000   0.560000 (  0.562588)
    UriTemplate   0.070000   0.000000   0.070000 (  0.072649)
    Addressable*  0.560000   0.000000   0.560000 (  0.556001)
    UriTemplate*  0.050000   0.000000   0.050000 (  0.054520)
    
    "{missing}" vs "{missing}" => ""
          user     system      total        real
    Addressable  0.550000   0.010000   0.560000 (  0.550707)
    UriTemplate   0.040000   0.000000   0.040000 (  0.035343)
    Addressable*  0.550000   0.000000   0.550000 (  0.556634)
    UriTemplate*  0.010000   0.000000   0.010000 (  0.003132)
    
    "{-prefix|/|segments}" vs "{/segments*}" => "/a/b/c"
          user     system      total        real
    Addressable  0.650000   0.000000   0.650000 (  0.656996)
    UriTemplate   0.030000   0.000000   0.030000 (  0.038546)
    Addressable*  0.660000   0.000000   0.660000 (  0.655364)
    UriTemplate*  0.020000   0.000000   0.020000 (  0.018265)
    
    "?{-join|&|one,two,three}" vs "{?one,two,three}" => "?one=1&two=2&three=3"
          user     system      total        real
    Addressable  0.670000   0.000000   0.670000 (  0.671649)
    UriTemplate   0.080000   0.000000   0.080000 (  0.078588)
    Addressable*  0.670000   0.000000   0.670000 (  0.669606)
    UriTemplate*  0.030000   0.000000   0.030000 (  0.035886)
    
    "http://{host}/{-suffix|/|segments}?{-join|&|one,two,bogus}\#{fragment}" vs "http://{host}{/segments*}/{?one,two,bogus}{#fragment}" => "http://example.com/a/b/c/?one=1&two=2#foo"
          user     system      total        real
    Addressable  0.800000   0.000000   0.800000 (  0.802170)
    UriTemplate   0.150000   0.000000   0.150000 (  0.147875)
    Addressable*  0.810000   0.000000   0.810000 (  0.803928)
    UriTemplate*  0.060000   0.000000   0.060000 (  0.064376)

=== Extraction
    "" => "" vs ""
          user     system      total        real
    Addressable  0.150000   0.000000   0.150000 (  0.144244)
    UriTemplate   0.080000   0.000000   0.080000 (  0.079467)
    Addressable*  0.140000   0.000000   0.140000 (  0.149177)
    UriTemplate*  0.010000   0.000000   0.010000 (  0.008808)
    
    "noneedtoescape" => "{simple_string}" vs "{simple_string}"
          user     system      total        real
    Addressable  0.350000   0.000000   0.350000 (  0.345314)
    UriTemplate   0.110000   0.000000   0.110000 (  0.116090)
    Addressable*  0.350000   0.000000   0.350000 (  0.342613)
    UriTemplate*  0.020000   0.000000   0.020000 (  0.025884)
    
    "%2F%20%2F%25%2F%20%3F%2B" => "{escaped_string}" vs "{escaped_string}"
          user     system      total        real
    Addressable  0.410000   0.000000   0.410000 (  0.404258)
    UriTemplate   0.140000   0.000000   0.140000 (  0.143897)
    Addressable*  0.380000   0.000000   0.380000 (  0.382331)
    UriTemplate*  0.060000   0.000000   0.060000 (  0.053483)
    
    "" => "{missing}" vs "{missing}"
          user     system      total        real
    Addressable  0.220000   0.000000   0.220000 (  0.222086)
    UriTemplate   0.100000   0.000000   0.100000 (  0.104280)
    Addressable*  0.230000   0.000000   0.230000 (  0.238814)
    UriTemplate*  0.020000   0.000000   0.020000 (  0.017284)
    
    "/a/b/c" => "{-prefix|/|segments}" vs "{/segments*}"
          user     system      total        real
    Addressable  0.490000   0.000000   0.490000 (  0.489809)
    UriTemplate   0.230000   0.000000   0.230000 (  0.232298)
    Addressable*  0.490000   0.000000   0.490000 (  0.489334)
    UriTemplate*  0.120000   0.000000   0.120000 (  0.119815)
    
    "?one=1&two=2&three=3" => "?{-join|&|one,two,three}" vs "{?one,two,three}"
          user     system      total        real
    Addressable  0.550000   0.000000   0.550000 (  0.553224)
    UriTemplate   0.210000   0.000000   0.210000 (  0.208296)
    Addressable*  0.550000   0.000000   0.550000 (  0.551459)
    UriTemplate*  0.060000   0.000000   0.060000 (  0.059963)
    
    "http://example.com/a/b/c/?one=1&two=2#foo" => "http://{host}/{-suffix|/|segments}?{-join|&|one,two,bogus}\#{fragment}" vs "http://{host}{/segments*}/{?one,two,bogus}{#fragment}"
          user     system      total        real
    Addressable  0.980000   0.000000   0.980000 (  0.980292)
    UriTemplate   0.450000   0.000000   0.450000 (  0.446143)
    Addressable*  1.000000   0.000000   1.000000 (  0.996237)
    UriTemplate*  0.170000   0.000000   0.170000 (  0.175239)
    
SUCCESS - Draft7 was faster in every test!

